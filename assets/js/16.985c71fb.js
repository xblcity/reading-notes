(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{442:function(t,s,a){"use strict";a.r(s);var n=a(23),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-js实战-第二版-2018"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js实战-第二版-2018"}},[t._v("#")]),t._v(" Node.js实战 第二版 2018")]),t._v(" "),a("blockquote",[a("p",[t._v("时间不是很充分，所以大致过了一下，然后就去实战了")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("第一部分 Node基础知识介绍")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%AC%A2%E8%BF%8E%E8%BF%9B%E5%85%A5node.js%E7%9A%84%E4%B8%96%E7%95%8C"}},[t._v("第一章 欢迎进入Node.js的世界")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%BA%8C%E7%AB%A0-node%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80"}},[t._v("第二章 Node编程基础")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%B8%89%E7%AB%A0-node-web%E7%A8%8B%E5%BA%8F%E6%98%AF%E4%BB%80%E4%B9%88"}},[t._v("第三章 Node Web程序是什么")])])])])])]),t._v(" "),a("h2",{attrs:{id:"第一章-欢迎进入node-js的世界"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一章-欢迎进入node-js的世界"}},[t._v("#")]),t._v(" 第一章 欢迎进入Node.js的世界")]),t._v(" "),a("p",[t._v("在Node中，对于I/O请求，为了解决请求慢的问题，Node用三种技术解决这个问题：事件，异步API，非阻塞I/O")]),t._v(" "),a("p",[t._v("在Node中，回调函数的第一个参数通常是错误对象")]),t._v(" "),a("p",[t._v("Node应用程序主要分为三种类型")]),t._v(" "),a("ul",[a("li",[t._v("Web应用程序")]),t._v(" "),a("li",[t._v("命令行工具，比如npm, webpack")]),t._v(" "),a("li",[t._v("后台程序和桌面程序，后台程序就是后台服务，比如pm2，桌面程序一般是用Electron框架写的软件，比如Atom, VS Code")])]),t._v(" "),a("h2",{attrs:{id:"第二章-node编程基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二章-node编程基础"}},[t._v("#")]),t._v(" 第二章 Node编程基础")]),t._v(" "),a("p",[t._v("引入模块的api require 是Node种少数几个同步I/O操作之一")]),t._v(" "),a("p",[t._v("模块引入机制：是核心模块吗？在node_modules中吗？父目录存在吗？在环境变量NODE_PATH指定的目录下吗？==>抛出异常")]),t._v(" "),a("p",[t._v("在web前端程序，界面事件(比如鼠标点击)触发的逻辑，就是异步。服务端异步编程也一样，事件发生会触发响应逻辑，在Node的世界里流行两种响应逻辑管理方式：回调和事件监听。")]),t._v(" "),a("p",[t._v("回到通常用来定义一次性响应的逻辑，对于数据库查询，可以指定一个回调函数来确定如何处理查询结果。这个回调函数可能会显示数据库查询结果，根据这些结果做些计算，或者以查询结果为参数执行另一个回调函数")]),t._v(" "),a("p",[t._v("事件监听器本质上也是一个回调，不同的是，它跟一个概念实体(事件)相关联，例如，当有人在浏览器中点击鼠标时，鼠标点击就是一个需要 处理的事件，在Node中，当有http请求过来时，http请求会发出一个request事件，你可以监听那个request事件，并添加一些响应逻辑，在下面这个例子中，因为用EventEmitter.prototype.on在服务器上绑定了一个监听器，所以每当有request时间发出时，服务器就会调用handleRequest函数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("一个Node HTTP服务器实例就是一个事件发射器，一个可以继承，能够添加时间发射及处理能力的类(EventEmitter)")]),t._v(" "),a("h3",{attrs:{id:"用回调函数处理一次性事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用回调函数处理一次性事件"}},[t._v("#")]),t._v(" 用回调函数处理一次性事件")]),t._v(" "),a("p",[t._v("回调是一个函数，它被当做参数传递给异步函数，比如node的fs模块，")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./test.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server Error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"用事件发射器处理重复性事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用事件发射器处理重复性事件"}},[t._v("#")]),t._v(" 用事件发射器处理重复性事件")]),t._v(" "),a("p",[t._v("事件发射器会触发事件，并且在那些事件被触发时能够处理它们，一些重要的Node API组件比如HTTP服务器，TCP服务器和流都被做成了事件发射器，你也可以创建自己的事件发射器。")]),t._v(" "),a("p",[t._v("比如Node中的TCP socket，它有一个data事件，每当socket中有新数据时就会触发。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("使用node xxx.js运行，使用命令行"),a("code",[t._v("telnet 127.0.0.1 8888")]),t._v(" 发送数据给服务器(window没有telnet)")]),t._v(" "),a("p",[t._v("用事件发射器实现简单的发布/预订系统")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Todo")]),t._v("\n")])])]),a("h3",{attrs:{id:"异步开发要注意的难题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步开发要注意的难题"}},[t._v("#")]),t._v(" 异步开发要注意的难题")]),t._v(" "),a("p",[t._v("代码执行顺序")]),t._v(" "),a("p",[t._v("流程控制：串行执行/并行执行")]),t._v(" "),a("h2",{attrs:{id:"第三章-node-web程序是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三章-node-web程序是什么"}},[t._v("#")]),t._v(" 第三章 Node Web程序是什么")])])}),[],!1,null,null,null);s.default=e.exports}}]);