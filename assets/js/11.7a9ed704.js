(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{439:function(t,s,a){"use strict";a.r(s);var n=a(23),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"æ·±å…¥æµ…å‡ºnode-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å…¥æµ…å‡ºnode-js"}},[t._v("#")]),t._v(" æ·±å…¥æµ…å‡ºnode.js")]),t._v(" "),a("blockquote",[a("p",[t._v("è¯¥ä¹¦ä¸ä»…è®²è§£äº†node.jsæ–¹é¢çš„çŸ¥è¯†ï¼Œå¯¹äºäº†è§£ä¸å·©å›ºç½‘ç»œä¼ è¾“æ–¹é¢çš„çŸ¥è¯†ä¹Ÿæœ‰å¾ˆå¤§å¸®åŠ©ï¼Œå¯¹å‰ç«¯å¼€å‘æ¥è¯´ï¼Œå¤ªæ£’äº†~")])]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%B8%80%E7%AB%A0-node%E7%AE%80%E4%BB%8B"}},[t._v("ç¬¬ä¸€ç«  Nodeç®€ä»‹")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%A8%A1%E5%9D%97%E6%9C%BA%E5%88%B6"}},[t._v("ç¬¬äºŒç«  Nodeç®€ä»‹")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%BC%82%E6%AD%A5i/o"}},[t._v("ç¬¬ä¸‰ç«  å¼‚æ­¥I/O")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"}},[t._v("ç¬¬å››ç«  å¼‚æ­¥ç¼–ç¨‹")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%86%85%E5%AD%98%E6%8E%A7%E5%88%B6"}},[t._v("ç¬¬äº”ç«  å†…å­˜æ§åˆ¶")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E7%90%86%E8%A7%A3buffer"}},[t._v("ç¬¬å…­ç«  ç†è§£Buffer")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"}},[t._v("ç¬¬ä¸ƒç«  ç½‘ç»œç¼–ç¨‹")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E6%9E%84%E5%BB%BAweb%E5%BA%94%E7%94%A8"}},[t._v("ç¬¬å…«ç«  æ„å»ºWebåº”ç”¨")])])])]),t._v(" "),a("p",[t._v("ğŸ˜„ ğŸ˜ƒ ğŸ˜‡")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬ä¸€ç« -nodeç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€ç« -nodeç®€ä»‹"}},[t._v("#")]),t._v(" ç¬¬ä¸€ç«  Nodeç®€ä»‹")]),t._v(" "),a("h3",{attrs:{id:"_1-4-nodeçš„ç‰¹ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-nodeçš„ç‰¹ç‚¹"}},[t._v("#")]),t._v(" 1.4 Nodeçš„ç‰¹ç‚¹")]),t._v(" "),a("h4",{attrs:{id:"_1-4-1-å¼‚æ­¥i-o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-å¼‚æ­¥i-o"}},[t._v("#")]),t._v(" 1.4.1 å¼‚æ­¥I/O")]),t._v(" "),a("p",[t._v("I/O å³ Input/Outputï¼Œå³è¾“å…¥è¾“å‡ºï¼Œå¼‚æ­¥I/Oå³å³æ—¶Inputä¸ä¼šç«‹å³å¾—åˆ°Output"),a("br"),t._v("\næ¯”å¦‚å‘èµ·ajaxè¯·æ±‚å°±æ˜¯å¼‚æ­¥I/O")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ”¶åˆ°å“åº”'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å‘é€ajaxç»“æŸ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å…ˆè¾“å‡ºçš„æ˜¯"),a("code",[t._v("å‘é€ajaxç»“æŸ")]),t._v(",ç„¶åè¾“å‡ºçš„æ˜¯"),a("code",[t._v("æ”¶åˆ°å“åº”")]),a("br"),t._v("\nä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨"),a("code",[t._v("$.post()")]),t._v("ä¹‹åï¼Œåç»­ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œä½†æ˜¯'æ”¶åˆ°å“åº”'çš„æ‰§è¡Œæ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œï¼Œå¼‚æ­¥è°ƒç”¨ä¸­å¯¹äºç»“æœå€¼çš„æ•è·æ˜¯ç¬¦åˆ'Don't call me, I will call you'çš„åŸåˆ™çš„ï¼Œè¿™ä¹Ÿæ˜¯æ³¨é‡ç»“æœï¼Œä¸å…³å¿ƒè¿‡ç¨‹çš„ä¸€ç§è¡¨ç°ã€‚")]),t._v(" "),a("p",[t._v("åœ¨Nodeä¸­ï¼Œå¼‚æ­¥I/Oä¹Ÿå¾ˆå¸¸è§ã€‚ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä¸å‰ç«¯ajaxè°ƒç”¨çš„æ–¹æ³•æ˜¯æå…¶ç±»ä¼¼çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯»å–æ–‡ä»¶å®Œæˆ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å‘èµ·è¯»å–æ–‡ä»¶ç»“æŸ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("åŒæ ·ï¼Œå…ˆè¾“å‡ºçš„æ˜¯'å‘èµ·è¯»å–æ–‡ä»¶ç»“æŸ'ï¼Œ'è¯»å–æ–‡ä»¶å®Œæˆ'çš„æ‰§è¡Œä¹Ÿå–å†³äºæ–‡ä»¶çš„å¼‚æ­¥è°ƒç”¨ä½•æ—¶ç»“æŸã€‚")]),t._v(" "),a("p",[t._v("åœ¨Nodeä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¯­è¨€å±‚é¢å¾ˆè‡ªç„¶çš„è¿›è¡Œå¹¶è¡ŒI/Oæ“ä½œï¼Œæ¯ä¸ªè°ƒç”¨ä¹‹é—´æ— éœ€ç­‰å¾…ä¹‹å‰çš„I/Oè°ƒç”¨ç»“æŸã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯»å–æ–‡ä»¶1å®Œæˆ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯»å–æ–‡ä»¶2å®Œæˆ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¯¹äºåŒæ­¥I/Oè€Œè¨€ï¼Œå®ƒä»¬çš„è€—æ—¶æ˜¯ä¸¤ä¸ªä»»åŠ¡çš„è€—æ—¶åªå’Œï¼Œè€Œå¼‚æ­¥I/Oè¯»å–æ–‡ä»¶çš„è€—æ—¶å–å†³äºæœ€æ…¢çš„é‚£ä¸ªæ–‡ä»¶è¯»å–çš„è€—æ—¶(å¼‚æ­¥I/Oæœºåˆ¶ä¸å®ç°è§ç¬¬ä¸‰ç« )")]),t._v(" "),a("h4",{attrs:{id:"_1-4-2-äº‹ä»¶ä¸å›è°ƒå‡½æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-äº‹ä»¶ä¸å›è°ƒå‡½æ•°"}},[t._v("#")]),t._v(" 1.4.2 äº‹ä»¶ä¸å›è°ƒå‡½æ•°")]),t._v(" "),a("p",[t._v("Nodeåˆ›å»ºä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå¹¶ä¾¦å¬8080ç«¯å£ï¼Œå¯¹äºæœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¸ºå…¶ç»‘å®šäº†requestäº‹ä»¶ï¼Œå¯¹äºè¯·æ±‚å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸ºå…¶ç»‘å®šäº†dataäº‹ä»¶å’Œendäº‹ä»¶")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" querystring "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requre")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'querystring'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾¦å¬æœåŠ¡å™¨çš„requestäº‹ä»¶")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" postData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾¦å¬è¯·æ±‚çš„dataäº‹ä»¶")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    postData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" chunk\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é•‡å®šè¯·æ±‚çš„endäº‹ä»¶")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æœåŠ¡å™¨å¯åŠ¨å®Œæˆ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ç›¸åº”çš„ï¼Œæˆ‘ä»¬åœ¨å‰ç«¯ä¸ºajaxç»‘å®šäº†successäº‹ä»¶ï¼Œåœ¨å‘å‡ºè¯·æ±‚åï¼Œåªå…³å¿ƒè¯·æ±‚æˆåŠŸæ—¶æ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘å³å¯")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'method'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// successäº‹ä»¶è¦å¤„ç†çš„å†…å®¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå›è°ƒå‡½æ•°æ— å¤„ä¸åœ¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨jsä¸­ï¼Œæˆ‘ä»¬å°†å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘æ¥å¯¹å¾…ï¼Œå¯ä»¥å°†å‡½æ•°ä½œä¸ºå¯¹è±¡ä¼ é€’ç»™æ–¹æ³•ä½œä¸ºå®å‚è¿›è¡Œè°ƒç”¨")]),t._v(" "),a("p",[t._v("Nodeé™¤äº†å¼‚æ­¥å’Œäº‹ä»¶å¤–ï¼Œå›è°ƒå‡½æ•°ä¹Ÿæ˜¯ä¸€å¤§ç‰¹è‰²ï¼Œå›è°ƒå‡½æ•°ä¹Ÿæ˜¯æœ€å¥½çš„æ¥å—å¼‚æ­¥è°ƒç”¨è¿”å›æ•°æ®çš„æ–¹å¼")]),t._v(" "),a("h4",{attrs:{id:"_1-4-3-å•çº¿ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-å•çº¿ç¨‹"}},[t._v("#")]),t._v(" 1.4.3 å•çº¿ç¨‹")]),t._v(" "),a("p",[t._v("Nodeä¿æŒäº†jsåœ¨æµè§ˆå™¨ä¸­å•çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œè€Œä¸”åœ¨Nodeä¸­ï¼Œjsä¸å…¶ä»–çº¿ç¨‹æ˜¯æ— æ³•å…±äº«ä»»ä½•çŠ¶æ€çš„ã€‚å•çº¿ç¨‹çš„æœ€å¤§å¥½å¤„æ˜¯ä¸ç”¨åƒå¤šçº¿ç¨‹ç¼–ç¨‹é‚£æ ·æ¥šæ¥šåœ¨æ„çŠ¶æ€çš„åŒæ­¥é—®é¢˜ï¼Œè¿™é‡Œè¯¶å‘¦æ­»é”çš„å­˜åœ¨ï¼Œä¹Ÿæ²¡æœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡äº¤æ¢æ‰€å¸¦æ¥çš„æ€§èƒ½ä¸Šçš„å¼€é”€ã€‚")]),t._v(" "),a("p",[t._v("å•çº¿ç¨‹çš„å¼±ç‚¹å…·ä½“æœ‰ä»¥ä¸‹ä¸‰ç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("æ— æ³•åˆ©ç”¨å¤šæ ¸CPU")]),t._v(" "),a("li",[t._v("é”™è¯¯ä¼šå¼•èµ·æ•´ä¸ªåº”ç”¨é€€å‡ºï¼Œåº”ç”¨çš„å¥å£®æ€§å€¼å¾—è€ƒéªŒ")]),t._v(" "),a("li",[t._v("å¤§é‡è®¡ç®—å ç”¨CPUå¯¼è‡´æ— æ³•ç»§ç»­è°ƒç”¨å¼‚æ­¥I/O")])]),t._v(" "),a("p",[t._v("Nodeé‡‡ç”¨ä¸Web Workersç›¸åŒçš„æ€è·¯æ¥è§£å†³å•çº¿ç¨‹ä¸­å¤§è®¡ç®—é‡çš„é—®é¢˜: child_process")]),t._v(" "),a("h4",{attrs:{id:"_1-4-4-è·¨å¹³å°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-è·¨å¹³å°"}},[t._v("#")]),t._v(" 1.4.4 è·¨å¹³å°")]),t._v(" "),a("p",[t._v("Linuxä¸Windows")]),t._v(" "),a("h3",{attrs:{id:"_1-5-nodeçš„åº”ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-nodeçš„åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" 1.5 Nodeçš„åº”ç”¨åœºæ™¯")]),t._v(" "),a("p",[t._v("å…³äºNodeï¼Œè®¨è®ºè¾ƒå¤šçš„ä¸»è¦æœ‰I/Oå¯†é›†å‹å’ŒCPUå¯†é›†å‹")]),t._v(" "),a("h4",{attrs:{id:"_1-5-1-i-oå¯†é›†å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-i-oå¯†é›†å‹"}},[t._v("#")]),t._v(" 1.5.1 I/Oå¯†é›†å‹")]),t._v(" "),a("p",[t._v("ä»å•çº¿ç¨‹è§’åº¦æ¥è¯´ï¼ŒNodeå¤„ç†I/Oçš„èƒ½åŠ›æ˜¯å€¼å¾—ç§°èµçš„ã€‚Nodeé¢å‘ç½‘ç»œä¸”æ“…é•¿å¹¶è¡ŒI/O ?")]),t._v(" "),a("p",[t._v("I/Oå¯†é›†çš„ä¼˜åŠ¿ä¸»è¦åœ¨äºNodeåˆ©ç”¨äº‹ä»¶å¾ªç¯çš„ å¤„ç†èƒ½åŠ›ï¼Œè€Œä¸æ˜¯å¯åŠ¨æ¯ä¸€ä¸ªçº¿ç¨‹ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚æœåŠ¡ï¼Œèµ„æºå ç”¨æå°‘")]),t._v(" "),a("h4",{attrs:{id:"_1-5-2-æ˜¯å¦ä¸æ“…é•¿cpuå¯†é›†å‹ä¸šåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-æ˜¯å¦ä¸æ“…é•¿cpuå¯†é›†å‹ä¸šåŠ¡"}},[t._v("#")]),t._v(" 1.5.2 æ˜¯å¦ä¸æ“…é•¿CPUå¯†é›†å‹ä¸šåŠ¡")]),t._v(" "),a("p",[t._v("CPUå¯†é›†å‹åº”ç”¨ç»™Nodeå¸¦æ¥çš„æŒ‘æˆ˜ä¸»è¦æ˜¯ï¼šç”±äºjså•çº¿ç¨‹çš„åŸå› ï¼Œå¦‚æœæœ‰é•¿æ—¶é—´è¿è¡Œçš„è®¡ç®—(æ¯”å¦‚å¤§å¾ªç¯)ï¼Œå°†ä¼šå¯¼è‡´CPUæ—¶é—´ç‰‡ä¸èƒ½é‡Šæ”¾ï¼Œä½¿å¾—åç»­I/Oæ— æ³•å‘èµ·")]),t._v(" "),a("h3",{attrs:{id:"_1-6-nodeçš„ä½¿ç”¨è€…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-nodeçš„ä½¿ç”¨è€…"}},[t._v("#")]),t._v(" 1.6 Nodeçš„ä½¿ç”¨è€…")]),t._v(" "),a("ul",[a("li",[t._v("å‰åç«¯ç¼–ç¨‹è¯­è¨€ç¯å¢ƒç»Ÿä¸€")]),t._v(" "),a("li",[t._v("Nodeå¸¦æ¥çš„é«˜æ€§èƒ½I/Oç”¨äºå®æ—¶åº”ç”¨")]),t._v(" "),a("li",[t._v("å¹¶è¡ŒI/Oä½¿å¾—ä½¿ç”¨è€…å¯ä»¥æ›´é«˜æ•ˆåœ°åˆ©ç”¨åˆ†å¸ƒå¼ç¯å¢ƒ")]),t._v(" "),a("li",[t._v("å¹¶è¡ŒI/Oï¼Œæœ‰æ•ˆåˆ©ç”¨ç¨³å®šæ¥å£æå‡webæ¸²æŸ“èƒ½åŠ›")]),t._v(" "),a("li",[t._v("äº‘è®¡ç®—å¹³å°æä¾›Nodeæ”¯æŒ")]),t._v(" "),a("li",[t._v("æ¸¸æˆå¼€å‘é¢†åŸŸ")]),t._v(" "),a("li",[t._v("å·¥å…·ç±»åº”ç”¨")])]),t._v(" "),a("h3",{attrs:{id:"_1-7-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-æ€»ç»“"}},[t._v("#")]),t._v(" 1.7 æ€»ç»“")]),t._v(" "),a("p",[t._v("Nodeçš„ç‰¹ç‚¹ä¸ä¼˜ç‚¹ï¼Œä»¥åŠNodeçš„ä½¿ç”¨åœºæ™¯")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬äºŒç« -æ¨¡å—æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒç« -æ¨¡å—æœºåˆ¶"}},[t._v("#")]),t._v(" ç¬¬äºŒç«  æ¨¡å—æœºåˆ¶")]),t._v(" "),a("p",[t._v("jsè¯ç”Ÿä¹‹åˆï¼Œweb1.0æ—¶ä»£ï¼Œjsè¿™ç§è„šæœ¬è¯­è¨€ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨å¹¿ä¸ºæµä¼ ï¼Œä¸€æ˜¯è¡¨å•æ ¡éªŒï¼Œè€Œæ˜¯ç½‘é¡µç‰¹æ•ˆã€‚web2.0æ—¶ä»£ï¼Œå„ç§å‰ç«¯åº“å’Œæ¡†æ¶è¢«å¼€å‘å‡ºæ¥ï¼Œéšåæ›´å¤šçš„åº”ç”¨éœ€æ±‚åœ¨å‰ç«¯è¢«å®ç°ï¼Œjsä¹Ÿä»è¡¨å•æ ¡éªŒè·ƒè¿åˆ°åº”ç”¨å¼€å‘çš„çº§åˆ«ä¸Š"),a("br"),t._v("\njsä¸æ–­è¢«ç±»å‰§å’ŒæŠ½è±¡ï¼Œä»¥æ›´å¥½åœ°ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼Œä»å¦ä¸€ä¸ªè§’åº¦è€Œè¨€ï¼Œå®ƒä¹Ÿé“å‡ºäº†jså…ˆå¤©å°±ç¼ºä¹çš„ä¸€é¡¹åŠŸèƒ½ï¼šæ¨¡å—ã€‚"),a("br"),t._v("\nåœ¨å…¶ä»–é«˜çº§è¯­è¨€ä¸­ï¼ŒJavaæœ‰ç±»æ–‡ä»¶ï¼ŒPythonæœ‰importæœºåˆ¶ï¼ŒRubyæœ‰requireï¼ŒPHPæœ‰includeå’Œrequrieï¼Œè€Œjsé€šè¿‡"),a("code",[t._v("<script>")]),t._v("æ ‡ç­¾å¼•å…¥ä»£ç çš„æ–¹å¼æ˜¾å¾—æ‚ä¹±æ— ç« ï¼Œè¯­è¨€è‡ªèº«æ¯«æ— ç»„ç»‡å’Œçº¦æŸèƒ½åŠ›ã€‚äººä»¬ä¸å¾—ä¸ç”¨å‘½åç©ºé—´ç­‰æ–¹å¼äººä¸ºåœ°çº¦æŸä»£ç ï¼Œä»¥æ±‚è¾¾åˆ°å®‰å…¨å’Œæ˜“ç”¨çš„ç›®çš„")]),t._v(" "),a("h3",{attrs:{id:"_2-1-commonjsè§„èŒƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-commonjsè§„èŒƒ"}},[t._v("#")]),t._v(" 2.1 CommonJSè§„èŒƒ")]),t._v(" "),a("h4",{attrs:{id:"_2-1-2-commonjsçš„æ¨¡å—è§„èŒƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-commonjsçš„æ¨¡å—è§„èŒƒ"}},[t._v("#")]),t._v(" 2.1.2 CommonJSçš„æ¨¡å—è§„èŒƒ")]),t._v(" "),a("ul",[a("li",[t._v("æ¨¡å—å¼•ç”¨ "),a("code",[t._v("var math = require('math')")])]),t._v(" "),a("li",[t._v("æ¨¡å—å®šä¹‰ï¼Œä½¿ç”¨"),a("code",[t._v("module.exports")]),t._v("å¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–å˜é‡")]),t._v(" "),a("li",[t._v("æ¨¡å—æ ‡è¯†ï¼Œå…¶å®å°±æ˜¯ä¼ é€’ç»™"),a("code",[t._v("require()")]),t._v("æ–¹æ³•çš„å‚æ•°")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-nodeçš„æ¨¡å—å®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nodeçš„æ¨¡å—å®ç°"}},[t._v("#")]),t._v(" 2.2 Nodeçš„æ¨¡å—å®ç°")]),t._v(" "),a("p",[t._v("åœ¨Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Nodeæä¾›çš„æ¨¡å—ï¼Œç§°ä¸ºæ ¸å¿ƒæ¨¡å—ã€‚å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„æ¨¡å—ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—")]),t._v(" "),a("ul",[a("li",[t._v("æ ¸å¿ƒæ¨¡å—åœ¨Nodeæºä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨nodeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œéƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å°±ç›´æ¥åŠ è½½è¿›å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†æ ¸å¿ƒå¼•å…¥æ—¶ï¼Œæ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤å¯ä»¥èƒœå´è¿ªå¥¥ï¼Œå¹¶ä¸”åœ¨è·¯å¾„åˆ†æä¸­ä¼˜å…ˆåˆ¤æ–­ï¼Œæ‰€ä»¥å®ƒä»¬åŠ è½½é€Ÿåº¦æ˜¯æœ€å¿«çš„")]),t._v(" "),a("li",[t._v("æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æï¼Œæ–‡ä»¶å®šä½ï¼Œç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢")])]),t._v(" "),a("h4",{attrs:{id:"_2-2-1-ä¼˜å…ˆä»ç¼“å­˜åŠ è½½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-ä¼˜å…ˆä»ç¼“å­˜åŠ è½½"}},[t._v("#")]),t._v(" 2.2.1 ä¼˜å…ˆä»ç¼“å­˜åŠ è½½")]),t._v(" "),a("h4",{attrs:{id:"_2-2-2-è·¯å¾„åˆ†æå’Œæ–‡ä»¶å®šä½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-è·¯å¾„åˆ†æå’Œæ–‡ä»¶å®šä½"}},[t._v("#")]),t._v(" 2.2.2 è·¯å¾„åˆ†æå’Œæ–‡ä»¶å®šä½")]),t._v(" "),a("h5",{attrs:{id:"_1-æ¨¡å—æ ‡è¯†ç¬¦åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¨¡å—æ ‡è¯†ç¬¦åˆ†æ"}},[t._v("#")]),t._v(" 1.æ¨¡å—æ ‡è¯†ç¬¦åˆ†æ")]),t._v(" "),a("p",[t._v("require()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ ‡è¯†ç¬¦ä½œä¸ºå‚æ•°ï¼Œæ¨¡å—æ ‡è¯†ç¬¦åœ¨Nodeä¸­ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»:")]),t._v(" "),a("ul",[a("li",[t._v("æ ¸å¿ƒæ¨¡å—ï¼Œå¦‚http,fs,pathç­‰")]),t._v(" "),a("li",[t._v(".æˆ–..å¼€å§‹çš„ç›¸å¯¹è·¯å¾„æ–‡ä»¶æ¨¡å—")]),t._v(" "),a("li",[t._v("ä»¥/å¼€å§‹çš„ç»å¯¹è·¯å¾„æ–‡ä»¶æ¨¡å—")]),t._v(" "),a("li",[t._v("éè·¯å¾„å½¢å¼çš„æ–‡ä»¶æ¨¡å—ï¼Œå¦‚è‡ªå®šä¹‰çš„connectæ¨¡å—")])]),t._v(" "),a("h5",{attrs:{id:"_2-æ–‡ä»¶å®šä½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ–‡ä»¶å®šä½"}},[t._v("#")]),t._v(" 2.æ–‡ä»¶å®šä½")]),t._v(" "),a("p",[t._v("require()åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‹“å±•åçš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNodeä¼šæŒ‰.js, .json, .nodeçš„æ¬¡åºè¡¥æ‰©å±•å")]),t._v(" "),a("h4",{attrs:{id:"_2-2-3-æ¨¡å—ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-æ¨¡å—ç¼–è¯‘"}},[t._v("#")]),t._v(" 2.2.3 æ¨¡å—ç¼–è¯‘")]),t._v(" "),a("p",[t._v("åœ¨Nodeä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡"),a("br"),t._v("\nç¼–è¯‘å’Œæ‰§è¡Œæ—¶å¼•å…¥æ–‡ä»¶æ¨¡å—çš„æœ€åä¸€ä¸ªé˜¶æ®µï¼Œå®šä½åˆ°å…·ä½“çš„æ–‡ä»¶åï¼ŒNodeä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ã€‚å¯¹äºä¸åŒçš„æ–‡ä»¶æ‹“å±•åï¼Œå™¨è½½å…¥æ–¹æ³•ä¹Ÿæœ‰æ‰€ä¸åŒ")]),t._v(" "),a("ul",[a("li",[t._v("jsæ–‡ä»¶ï¼Œé€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œ")]),t._v(" "),a("li",[t._v(".jsonæ–‡ä»¶ï¼Œé€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨JSON.parse()è§£æè¿”å›ç»“æœ")]),t._v(" "),a("li",[t._v(".nodeæ–‡ä»¶, è¿™æ˜¯C/C++ç¼–å†™çš„æ‹“å±•æ–‡ä»¶ï¼Œé€šè¿‡dlopen()æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶")]),t._v(" "),a("li",[t._v("å…¶ä½™æ‹“å±•åæ–‡ä»¶ï¼Œå®ƒä»¬éƒ½è¢«å½“åš.jsæ–‡ä»¶è½½å…¥")])]),t._v(" "),a("h5",{attrs:{id:"_1-jsæ¨¡å—çš„ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jsæ¨¡å—çš„ç¼–è¯‘"}},[t._v("#")]),t._v(" 1.JSæ¨¡å—çš„ç¼–è¯‘")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å­˜åœ¨ç€require,exports,moduleè¿™ä¸‰ä¸ªå˜é‡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ¨¡å—æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä»ä½•è€Œæ¥å‘¢ï¼Ÿç”šè‡³åœ¨Nodeçš„Apiæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—è¿˜æœ‰__filename, __dirnameè¿™ä¸¤ä¸ªå˜é‡çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆæ˜¯ä»ä½•è€Œæ¥çš„å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠç›´æ¥å®šä¹‰æ¨¡å—çš„è¿‡ç¨‹æ”¾åœ¨æµè§ˆå™¨ç«¯ï¼Œä¼šå­˜åœ¨æ±¡æŸ“å…¨å±€å˜é‡çš„æƒ…å†µ")]),t._v(" "),a("p",[t._v("äº‹å®ä¸Šï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹è·å–çš„jsæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" modlue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" math "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'math'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("area")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("radius")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" radius "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" radius\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("è¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¹‹é—´éƒ½è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»\nexportsä¸modules.exports\n// todo")]),t._v(" "),a("h5",{attrs:{id:"_2-c-c-æ¨¡å—çš„ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-c-c-æ¨¡å—çš„ç¼–è¯‘"}},[t._v("#")]),t._v(" 2.C/C++æ¨¡å—çš„ç¼–è¯‘")]),t._v(" "),a("h5",{attrs:{id:"_3-jsonæ–‡ä»¶çš„ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-jsonæ–‡ä»¶çš„ç¼–è¯‘"}},[t._v("#")]),t._v(" 3.JSONæ–‡ä»¶çš„ç¼–è¯‘")]),t._v(" "),a("p",[t._v("Nodeåˆ©ç”¨fsæ¨¡å—å¼‚æ­¥è¯»å–jsonæ–‡ä»¶çš„å†…å®¹ä¹‹åï¼Œè°ƒç”¨JSON.parse()æ–¹æ³•å¾—åˆ°å¯¹è±¡ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-3-æ ¸å¿ƒæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-æ ¸å¿ƒæ¨¡å—"}},[t._v("#")]),t._v(" 2.3 æ ¸å¿ƒæ¨¡å—")]),t._v(" "),a("p",[t._v("// Todo")]),t._v(" "),a("h3",{attrs:{id:"_2-4-c-c-æ‰©å±•æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-c-c-æ‰©å±•æ¨¡å—"}},[t._v("#")]),t._v(" 2.4 C/C++æ‰©å±•æ¨¡å—")]),t._v(" "),a("p",[t._v("// è‡ªå®šä¹‰æ¨¡å— Todo")]),t._v(" "),a("h3",{attrs:{id:"_2-5-æ¨¡å—è°ƒç”¨æ ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-æ¨¡å—è°ƒç”¨æ ˆ"}},[t._v("#")]),t._v(" 2.5 æ¨¡å—è°ƒç”¨æ ˆ")]),t._v(" "),a("p",[t._v("C/C++å†…å»ºæ¨¡å—å±äºæœ€åº•å±‚çš„æ¨¡å—ï¼Œå®ƒå±äºæ ¸å¿ƒæ¨¡å—ï¼Œä¸»è¦æä¾›APIç»™JSæ ¸å¿ƒæ¨¡å—å’Œç¬¬ä¸‰æ–¹JSæ–‡ä»¶æ¨¡å—è°ƒç”¨ã€‚"),a("br"),t._v("\nJSæ ¸å¿ƒæ¨¡å—èŒè´£æœ‰ä¸¤ç±»ï¼šä½œä¸ºC/C++å†…å»ºæ¨¡å—çš„å°è£…å±‚å’Œæ¡¥æ¥å±‚ï¼Œä¾›æ–‡ä»¶æ¨¡å—(å³ç”¨æˆ·è‡ªå·±ç¼–å†™çš„æ–‡ä»¶)è°ƒç”¨ï¼›ä¸€ç±»æ˜¯çº¯ç²¹çš„åŠŸèƒ½æ¨¡å—ï¼Œå®ƒä¸éœ€è¦å’Œåº•å±‚æ‰“äº¤é“ï¼Œä½†æ˜¯åˆååˆ†é‡è¦ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-6-åŒ…ä¸npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-åŒ…ä¸npm"}},[t._v("#")]),t._v(" 2.6 åŒ…ä¸NPM")]),t._v(" "),a("p",[t._v("// Todo~")]),t._v(" "),a("h3",{attrs:{id:"_2-7-å‰åç«¯å…±ç”¨æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-å‰åç«¯å…±ç”¨æ¨¡å—"}},[t._v("#")]),t._v(" 2.7 å‰åç«¯å…±ç”¨æ¨¡å—")]),t._v(" "),a("p",[t._v("// å‰ç«¯æ¨¡å—åŒ–AMD,CMD")]),t._v(" "),a("h3",{attrs:{id:"_2-8-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-æ€»ç»“"}},[t._v("#")]),t._v(" 2.8 æ€»ç»“")]),t._v(" "),a("p",[t._v("Common.jså®ç°äº†Nodeçš„æ¨¡å—åŒ–ï¼Œ"),a("br"),t._v("\nåœ¨Nodeä¸­æ ¸å¿ƒæ¨¡å—ï¼Œæ–‡ä»¶æ¨¡å—åˆ†åˆ«æ˜¯å¦‚ä½•è¢«åŠ è½½çš„ï¼Ÿ"),a("br"),t._v("\næ ¸å¿ƒæ¨¡å—ç¼–è¯‘ä»¥åŠè¢«å¼•å…¥çš„è¿‡ç¨‹ä¸åŸç†"),a("br"),t._v("\nNPMçš„ä½¿ç”¨ï¼Œä»¥åŠå®ç°è‡ªå·±çš„NPMåŒ…"),a("br"),t._v("\nå‰ç«¯æ¨¡å—åŒ–çš„å®ç°")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬ä¸‰ç« -å¼‚æ­¥i-o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰ç« -å¼‚æ­¥i-o"}},[t._v("#")]),t._v(" ç¬¬ä¸‰ç«  å¼‚æ­¥I/O")]),t._v(" "),a("h3",{attrs:{id:"_3-1-ä¸ºä»€ä¹ˆè¦å¼‚æ­¥i-o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-ä¸ºä»€ä¹ˆè¦å¼‚æ­¥i-o"}},[t._v("#")]),t._v(" 3.1 ä¸ºä»€ä¹ˆè¦å¼‚æ­¥I/O")]),t._v(" "),a("p",[t._v("å¼‚æ­¥è·å–èµ„æºï¼Œæ—¶é—´æ˜¯è·å–æ—¶é•¿æœ€å¤§è€…ï¼ŒåŒæ­¥è·å–èµ„æºï¼Œæ—¶é—´æ˜¯è·å–èµ„æºæ—¶é•¿ä¹‹å’Œ")]),t._v(" "),a("p",[t._v("å¤šçº¿ç¨‹çš„ä¼˜ç¼ºç‚¹ï¼Œä¼˜ç‚¹ï¼šå¤šçº¿ç¨‹åœ¨å¤šæ ¸CPUèƒ½æœ‰æ•ˆæé«˜CPUåˆ©ç”¨ç‡ï¼Œç¼ºç‚¹ï¼šé”ï¼Œåˆ‡æ¢ä¸Šä¸‹æ–‡")]),t._v(" "),a("h3",{attrs:{id:"_3-2-å¼‚æ­¥i-oç°çŠ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-å¼‚æ­¥i-oç°çŠ¶"}},[t._v("#")]),t._v(" 3.2 å¼‚æ­¥I/Oç°çŠ¶")]),t._v(" "),a("p",[t._v("æ“ä½œç³»ç»Ÿçš„éé˜»å¡I/Oçš„å®ç°ï¼šè½®è¯¢")]),t._v(" "),a("h3",{attrs:{id:"_3-3-nodeçš„å¼‚æ­¥i-o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-nodeçš„å¼‚æ­¥i-o"}},[t._v("#")]),t._v(" 3.3 Nodeçš„å¼‚æ­¥I/O")]),t._v(" "),a("p",[t._v("äº‹ä»¶å¾ªç¯ï¼š// Todo\nå¼‚æ­¥I/Oç¬¬ä¸€éƒ¨åˆ†ï¼šç»„è£…å¥½è¯·æ±‚å¯¹è±¡ï¼Œé€å…¥I/Oçº¿ç¨‹æ± ç­‰å¾…æ‰§è¡Œã€‚ç¬¬äºŒéƒ¨åˆ†ï¼šå›è°ƒé€šçŸ¥")]),t._v(" "),a("h3",{attrs:{id:"_3-4-éi-oçš„å¼‚æ­¥api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-éi-oçš„å¼‚æ­¥api"}},[t._v("#")]),t._v(" 3.4 éI/Oçš„å¼‚æ­¥API")]),t._v(" "),a("p",[t._v("å®šæ—¶å™¨çš„æ‰§è¡Œæ—¶æœº"),a("br"),t._v("\nprocess.nextTick()ä¸setImmediate()æ‰§è¡Œå…ˆå")]),t._v(" "),a("h3",{attrs:{id:"_3-5-äº‹ä»¶é©±åŠ¨ä¸é«˜æ€§èƒ½æœåŠ¡å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-äº‹ä»¶é©±åŠ¨ä¸é«˜æ€§èƒ½æœåŠ¡å™¨"}},[t._v("#")]),t._v(" 3.5 äº‹ä»¶é©±åŠ¨ä¸é«˜æ€§èƒ½æœåŠ¡å™¨")]),t._v(" "),a("p",[t._v("å¼‚æ­¥I/Oä¸ä»…ä»…åº”ç”¨åœ¨æ–‡ä»¶æ“ä½œä¸­"),a("br"),t._v("\nå‡ ç§æœåŠ¡å™¨æ¨¡å‹çš„ä¼˜ç¼ºç‚¹")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬å››ç« -å¼‚æ­¥ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å››ç« -å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" ç¬¬å››ç«  å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),a("h3",{attrs:{id:"_4-1-å‡½æ•°å¼ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-å‡½æ•°å¼ç¼–ç¨‹"}},[t._v("#")]),t._v(" 4.1 å‡½æ•°å¼ç¼–ç¨‹")]),t._v(" "),a("p",[t._v("é«˜é˜¶å‡½æ•°ï¼šæŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–æ˜¯å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼çš„å‡½æ•°ï¼Œå¦‚forEach, map, reduce, reduceRight, filter, every, some")]),t._v(" "),a("p",[t._v("åå‡½æ•°ï¼šæ ¹æ®ä¸åŒçš„å‚æ•°å¯ä»¥äº§ç”Ÿä¸åŒçš„è¿”å›å‡½æ•°")]),t._v(" "),a("h3",{attrs:{id:"_4-2-å¼‚æ­¥ç¼–ç¨‹çš„ä¼˜åŠ¿ä¸ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-å¼‚æ­¥ç¼–ç¨‹çš„ä¼˜åŠ¿ä¸ç¼ºç‚¹"}},[t._v("#")]),t._v(" 4.2 å¼‚æ­¥ç¼–ç¨‹çš„ä¼˜åŠ¿ä¸ç¼ºç‚¹")]),t._v(" "),a("p",[t._v("Nodeçš„æœ€å¤§ç‰¹æ€§è«è¿‡äºäº‹ä»¶é©±åŠ¨çš„éé˜»å¡I/Oæ¨¡å‹")]),t._v(" "),a("p",[t._v("Nodeæ˜¯ä¸ºäº†è§£å†³ç¼–ç¨‹æ¨¡å‹ä¸­é˜»å¡I/Oçš„æ€§èƒ½é—®é¢˜çš„")]),t._v(" "),a("h4",{attrs:{id:"éš¾ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#éš¾ç‚¹"}},[t._v("#")]),t._v(" éš¾ç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("å¼‚å¸¸å¤„ç†: try catchåªèƒ½å¤„ç†åŒæ­¥å¼‚å¸¸é”™è¯¯")]),t._v(" "),a("li",[t._v("å‡½æ•°åµŒå¥—è¿‡æ·±")]),t._v(" "),a("li",[t._v("å¤šçº¿ç¨‹ç¼–ç¨‹")])]),t._v(" "),a("h3",{attrs:{id:"_4-3-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 4.3 å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("1.äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¢é˜…")]),t._v("\nemmiter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å¸ƒ")]),t._v("\nemmiter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event1, '")]),t._v("i am message'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¦‚æœäº‹ä»¶æ˜¯ä¾¦å¬å™¨è¿‡å¤šï¼Œå¯èƒ½å­˜åœ¨è¿‡å¤šå ç”¨CPUçš„æƒ…å†µ")]),t._v(" "),a("p",[t._v("2.Promise\n3.async")]),t._v(" "),a("h3",{attrs:{id:"_4-4-å¼‚æ­¥å¹¶å‘æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-å¼‚æ­¥å¹¶å‘æ§åˆ¶"}},[t._v("#")]),t._v(" 4.4 å¼‚æ­¥å¹¶å‘æ§åˆ¶")]),t._v(" "),a("h3",{attrs:{id:"_4-5-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-æ€»ç»“"}},[t._v("#")]),t._v(" 4.5 æ€»ç»“")]),t._v(" "),a("p",[t._v("æœ¬ç« ä¸»è¦ä»‹ç»äº†å¼‚æ­¥ç¼–ç¨‹çš„å‡ ç§è§£å†³æ–¹æ¡ˆï¼Œå¦‚äº‹ä»¶å‘å¸ƒ/è®¢é˜…ï¼ŒPromsieç­‰")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬äº”ç« -å†…å­˜æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äº”ç« -å†…å­˜æ§åˆ¶"}},[t._v("#")]),t._v(" ç¬¬äº”ç«  å†…å­˜æ§åˆ¶")]),t._v(" "),a("h3",{attrs:{id:"_5-1-v8çš„åƒåœ¾å›æ”¶æœºåˆ¶å’Œå†…å­˜é™åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-v8çš„åƒåœ¾å›æ”¶æœºåˆ¶å’Œå†…å­˜é™åˆ¶"}},[t._v("#")]),t._v(" 5.1 V8çš„åƒåœ¾å›æ”¶æœºåˆ¶å’Œå†…å­˜é™åˆ¶")]),t._v(" "),a("p",[t._v("æ–°ç”Ÿä»£å†…å­˜ä¸è€ç”Ÿä»£å†…å­˜")]),t._v(" "),a("h3",{attrs:{id:"_5-2-é«˜æ•ˆä½¿ç”¨å†…å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-é«˜æ•ˆä½¿ç”¨å†…å­˜"}},[t._v("#")]),t._v(" 5.2 é«˜æ•ˆä½¿ç”¨å†…å­˜")]),t._v(" "),a("h4",{attrs:{id:"_5-2-1-ä½œç”¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-ä½œç”¨åŸŸ"}},[t._v("#")]),t._v(" 5.2.1 ä½œç”¨åŸŸ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("foo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" local "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ä¼šåˆ›å»ºå¯¹åº”çš„ä½œç”¨åŸŸï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ä½œç”¨åŸŸä¼šè¢«é”€æ¯ã€‚åŒæ—¶å‡½æ•°ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡åˆ†é…åœ¨è¯¥ä½œç”¨åŸŸä¸Šï¼Œéšä½œç”¨åŸŸçš„é”€æ¯è€Œé”€æ¯ã€‚åªè¢«å±€éƒ¨å˜é‡å¼•ç”¨çš„å¯¹è±¡å­˜æ´»å‘¨æœŸè¾ƒçŸ­ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äºå¯¹è±¡éå¸¸å°ï¼Œå°†ä¼šåˆ†é…åœ¨æ–°ç”Ÿä»£çš„Fromç©ºé—´ä¸­ï¼Œåœ¨ä½œç”¨åŸŸé‡Šæ”¾åï¼Œå±€éƒ¨å˜é‡localå¤±æ•ˆï¼Œå…¶å¼•ç”¨çš„å¯¹è±¡å°†ä¼šåœ¨ä¸‹æ¬¡åƒåœ¾å›æ”¶æ—¶è¢«é‡Šæ”¾ã€‚"),a("br"),t._v("\nä»¥ä¸Šå°±æ˜¯åŸºæœ¬çš„å†…å­˜å›æ”¶è¿‡ç¨‹")]),t._v(" "),a("h3",{attrs:{id:"_5-2-2-é—­åŒ…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-é—­åŒ…"}},[t._v("#")]),t._v(" 5.2.2 é—­åŒ…")]),t._v(" "),a("p",[t._v("ä½œç”¨åŸŸé“¾ä¸Šçš„å¯¹è±¡åªèƒ½å‘ä¸Šï¼Œè¿™æ ·å¤–éƒ¨æ— æ³•å‘å†…éƒ¨è®¿é—®ã€‚å¦‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("foo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" local "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å±€éƒ¨å˜é‡'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("funciton")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" local "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å±€éƒ¨å˜é‡'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨jsä¸­ï¼Œå®ç°å¤–éƒ¨ä½œç”¨åŸŸè®¿é—®å†…éƒ¨ä½œç”¨åŸŸä¸­å˜é‡çš„æ–¹æ³•å«åšé—­åŒ…(closure)ï¼Œè¿™å¾—ç›Šäºé«˜é˜¶å‡½æ•°è¿™ä¸ªç‰¹æ€§ï¼šå‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›å€¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("foo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" local "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å±€éƒ¨å˜é‡'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" local\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" baz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// barå‡½æ•°å¼•ç”¨äº†localå˜é‡ï¼Œä½¿å¾—barçš„ä½œç”¨äºä¸€ç›´å­˜åœ¨")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// local")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("// Todo")]),t._v(" "),a("h3",{attrs:{id:"_5-3-å†…å­˜æŒ‡æ ‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-å†…å­˜æŒ‡æ ‡"}},[t._v("#")]),t._v(" 5.3 å†…å­˜æŒ‡æ ‡")]),t._v(" "),a("p",[t._v("æŸ¥çœ‹è¿›ç¨‹çš„å†…å­˜å ç”¨ï¼šprocess.memoryUsage()"),a("br"),t._v("\næŸ¥çœ‹ç³»ç»Ÿçš„å†…å­˜å ç”¨ï¼šos.totalmem()ä»¥åŠfreemem()"),a("br"),t._v("\nNodeçš„å†…å­˜ä½¿ç”¨å¹¶ééƒ½æ˜¯é€šè¿‡V8è¿›è¡Œåˆ†é…çš„ï¼Œæˆ‘ä»¬å°†é‚£äº›ä¸æ˜¯é€šè¿‡V8åˆ†é…çš„å†…å­˜ç§°ä¸ºå †å¤–å†…å­˜ã€‚"),a("br"),t._v("\nBufferå¯¹è±¡ä¸åŒäºå…¶ä»–å¯¹è±¡ï¼Œå®ƒä¸ç»è¿‡V8çš„å†…å­˜åˆ†é…æœºåˆ¶ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰å †å†…å­˜çš„å¤§å°é™åˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_5-4-å†…å­˜æ³„æ¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-å†…å­˜æ³„æ¼"}},[t._v("#")]),t._v(" 5.4 å†…å­˜æ³„æ¼")]),t._v(" "),a("p",[t._v("é€ æˆå†…å­˜æ³„æ¼çš„åŸå› å¦‚ä¸‹ï¼šç¼“å­˜ï¼Œé˜Ÿåˆ—æ¶ˆè´¹ä¸åŠæ—¶ï¼Œä½œç”¨åŸŸæœªé‡Šæ”¾")]),t._v(" "),a("h4",{attrs:{id:"_5-4-1-æ…å°†å†…å­˜å½“åšç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-1-æ…å°†å†…å­˜å½“åšç¼“å­˜"}},[t._v("#")]),t._v(" 5.4.1 æ…å°†å†…å­˜å½“åšç¼“å­˜")]),t._v(" "),a("p",[t._v("ä¸¥æ ¼æ„ä¹‰ä¸Šç¼“å­˜æœ‰ç€å®Œå–„çš„è¿‡æœŸç­–ç•¥ï¼Œï¼Œè€Œæ™®é€šå¯¹è±¡çš„é”®å€¼å¯¹å¹¶æ²¡æœ‰"),a("br"),t._v("\nä¸€ä¸ªå¯èƒ½é€ æˆå†…å­˜æ³„æ¼çš„åœºæ™¯ï¼Œmemoizeï¼Œundescoreçš„å®ç°ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("memorize")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hasher")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" memo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  hasher "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hasher "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("identity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasher")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("memo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" memo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("memo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œæ½œè—çš„é™·é˜±æ˜¯æ¯ä¸ªè¢«æ‰§è¡Œçš„ç»“æœéƒ½ä¼šæŒ‰ç…§å‚æ•°ç¼“å­˜åœ¨memoå¯¹è±¡ä¸Šï¼Œä¸ä¼šè¢«æ¸…é™¤ï¼Œè¿™åœ¨å‰ç«¯ç½‘é¡µè¿™ç§çŸ­æ—¶åº”ç”¨åœºæ™¯ä¸­ä¸å­˜åœ¨å¤§é—®é¢˜ï¼Œä½†æ˜¯æ‰§è¡Œé‡å¤§å’Œå‚æ•°å¤šæ ·æ€§çš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå†…å­˜å ç”¨ä¸é‡Šæ”¾ã€‚"),a("br"),t._v("\næ‰€ä»¥åœ¨Nodeä¸­ï¼Œä»»ä½•è§†å›¾æ‹¿å†…å­˜å½“ç¼“å­˜çš„è¡Œä¸ºéƒ½åº”å½“è¢«é™åˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_5-5-å†…å­˜æ³„æ¼æ’æŸ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-å†…å­˜æ³„æ¼æ’æŸ¥"}},[t._v("#")]),t._v(" 5.5 å†…å­˜æ³„æ¼æ’æŸ¥")]),t._v(" "),a("p",[t._v("ä½¿ç”¨å·¥å…·å®šä½Nodeåº”ç”¨çš„å†…å­˜æ³„æ¼")]),t._v(" "),a("h3",{attrs:{id:"_5-6-å¤§å†…å­˜åº”ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-å¤§å†…å­˜åº”ç”¨"}},[t._v("#")]),t._v(" 5.6 å¤§å†…å­˜åº”ç”¨")]),t._v(" "),a("p",[t._v("Nodeæä¾›äº†streamæ¨¡å—ç”¨äºå¤„ç†å¤§æ–‡ä»¶ï¼Œstreamåˆ†ä¸ºå¯è¯»ï¼Œå¯å†™ä¸¤ç§"),a("br"),t._v("\nNodeå¤§å¤šæ•°æ¨¡å—éƒ½æœ‰streamçš„åº”ç”¨ï¼Œæ¯”å¦‚fsçš„createReadStream()å’ŒcreateWriteStream()å¯ä»¥åˆ†åˆ«ç”¨äºåˆ›å»ºæ–‡ä»¶çš„å¯è¯»æµå’Œå¯å†™æµ")]),t._v(" "),a("p",[a("strong",[t._v("bufferå’Œstreamçš„å…³ç³»")]),a("br"),t._v("\nbuffer"),a("br"),t._v("\nä¸ºæ•°æ®ç¼“å†²å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„ç»“æ„çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šå¼€å§‹å†™å…¥çš„ä½ç½®åŠå†™å…¥çš„æ•°æ®é•¿åº¦ï¼Œå¾€å…¶ä¸­å†™å…¥äºŒè¿›åˆ¶æ•°æ®\nstream"),a("br"),t._v("\næ˜¯å¯¹bufferå¯¹è±¡çš„é«˜çº§å°è£…ï¼Œå…¶æ“ä½œçš„åº•å±‚è¿˜æ˜¯bufferå¯¹è±¡ï¼Œstreamå¯ä»¥è®¾ç½®ä¸ºå¯è¯»ã€å¯å†™ï¼Œæˆ–è€…å³å¯è¯»ä¹Ÿå¯å†™ï¼Œåœ¨nodejsä¸­ç»§æ‰¿äº†EventEmitteræ¥å£ï¼Œå¯ä»¥ç›‘å¬è¯»å…¥ã€å†™å…¥çš„è¿‡ç¨‹ã€‚å…·ä½“å®ç°æœ‰æ–‡ä»¶æµï¼Œhttpresponseç­‰")]),t._v(" "),a("h3",{attrs:{id:"_5-7-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-æ€»ç»“"}},[t._v("#")]),t._v(" 5.7 æ€»ç»“")]),t._v(" "),a("p",[t._v("Nodeå°†jsçš„ä¸»è¦åº”ç”¨åœºæ™¯æ‰©æ•£åˆ°äº†æœåŠ¡å™¨ç«¯ï¼Œéœ€è¦è€ƒè™‘çš„ç»†èŠ‚ä¹Ÿä¸æµè§ˆå™¨ä¸åŒï¼Œéœ€è¦æ›´ä¸¥è°¨åœ°ä¸ºæ¯ä¸€ä»½èµ„æºä½œå‡ºå®‰æ’")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬å…­ç« -ç†è§£buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å…­ç« -ç†è§£buffer"}},[t._v("#")]),t._v(" ç¬¬å…­ç«  ç†è§£Buffer")]),t._v(" "),a("p",[t._v("æ–‡ä»¶å’Œç½‘ç»œI/Oå¯¹äºå‰ç«¯å¼€å‘è€…è€Œè¨€éƒ½æ˜¯ä¸æ›¾æœ‰çš„åº”ç”¨åœºæ™¯ã€‚"),a("br"),t._v("\nç”±äºåº”ç”¨åœºæ™¯ä¸åŒï¼Œåœ¨Nodeä¸­ï¼Œåº”ç”¨éœ€è¦å¤„ç†ç½‘ç»œåè®®ï¼Œæ“ä½œæ•°æ®åº“ï¼Œå¤„ç†å›¾ç‰‡ï¼Œæ¥æ”¶ä¸Šä¼ æ–‡ä»¶ç­‰ï¼Œåœ¨ç½‘ç»œæµå’Œæ–‡ä»¶çš„æ“ä½œä¸­ï¼Œè¿˜è¦å¤„ç†å¤§é‡äºŒè¿›åˆ¶æ•°æ®,jsè‡ªå¸¦çš„å­—ç¬¦ä¸²è¿œè¿œä¸èƒ½æ»¡è¶³è¿™äº›éœ€æ±‚ï¼ˆJavaScriptè¯­è¨€æ²¡æœ‰è¯»å–æˆ–æ“ä½œäºŒè¿›åˆ¶æ•°æ®æµçš„æœºåˆ¶ã€‚ï¼‰ï¼Œäºæ˜¯Bufferå¯¹è±¡åº”è¿è€Œç”Ÿã€‚")]),t._v(" "),a("h3",{attrs:{id:"_6-1-bufferç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-bufferç»“æ„"}},[t._v("#")]),t._v(" 6.1 Bufferç»“æ„")]),t._v(" "),a("p",[t._v("Bufferæ˜¯ä¸€ä¸ªåƒArrayçš„å¯¹è±¡ï¼Œå…ƒç´ ä¸º16è¿›åˆ¶çš„ä¸¤ä½æ•°ï¼Œå³0-255çš„æ•°å€¼")]),t._v(" "),a("p",[t._v("ç”±äºbufferå¤ªè¿‡å¸¸è§ï¼ŒNodeåœ¨è¿›ç¨‹å¼€å¯æ—¶å°±å·²ç»åŠ è½½äº†å®ƒï¼Œå¹¶å°†å…¶æ”¾åœ¨å…¨å±€å¯¹è±¡(global)ä¸Šï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨bufferæ—¶ï¼Œæ— éœ€é€šè¿‡require()å³å¯ç›´æ¥ä½¿ç”¨")]),t._v(" "),a("h4",{attrs:{id:"_6-1-3-befferå†…å­˜åˆ†é…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-3-befferå†…å­˜åˆ†é…"}},[t._v("#")]),t._v(" 6.1.3 befferå†…å­˜åˆ†é…")]),t._v(" "),a("p",[t._v("bufferå¯¹è±¡å†…å­˜åŒ¹é…ä¸æ˜¯åœ¨V8çš„å †å†…å­˜ä¸­ï¼Œè€Œæ˜¯åœ¨Nodeçš„C++å±‚é¢å®ç°å†…å­˜çš„ç”³è¯·çš„ï¼ŒNodeåœ¨å†…å­˜ä¸­ä½¿ç”¨çš„æ˜¯C++å±‚é¢ç”³è¯·å†…å­˜ï¼Œåœ¨jså±‚é¢åˆ†é…å†…å­˜çš„ç­–ç•¥")]),t._v(" "),a("p",[t._v("Nodeä»¥8KBä¸ºç•Œé™æ¥åŒºåˆ†Bufferæ˜¯å¤§å¯¹è±¡è¿˜æ˜¯å°å¯¹è±¡")]),t._v(" "),a("h3",{attrs:{id:"_6-2-bufferçš„è½¬æ¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-bufferçš„è½¬æ¢"}},[t._v("#")]),t._v(" 6.2 Bufferçš„è½¬æ¢")]),t._v(" "),a("p",[t._v("å­—ç¬¦ä¸²è½¬bufferï¼Œ "),a("code",[t._v("new Buffer(str, [encoding])")]),t._v(" ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¼–ç æ¨¡å¼ï¼Œä¸€èˆ¬æ˜¯UTF-8"),a("br"),t._v("\nbufferè½¬å­—ç¬¦ä¸²ï¼Œ"),a("code",[t._v("buf.toString([encoding], [start], [end])")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-bufferçš„æ‹¼æ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-bufferçš„æ‹¼æ¥"}},[t._v("#")]),t._v(" 6.3 Bufferçš„æ‹¼æ¥")]),t._v(" "),a("h3",{attrs:{id:"_6-4-bufferä¸æ€§èƒ½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-bufferä¸æ€§èƒ½"}},[t._v("#")]),t._v(" 6.4 Bufferä¸æ€§èƒ½")]),t._v(" "),a("h3",{attrs:{id:"_6-5-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-æ€»ç»“"}},[t._v("#")]),t._v(" 6.5 æ€»ç»“")]),t._v(" "),a("p",[t._v("Bufferæ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå­—ç¬¦ä¸²ä¸Bufferä¹‹é—´å­˜åœ¨ç¼–ç å…³ç³»")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬ä¸ƒç« -ç½‘ç»œç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸ƒç« -ç½‘ç»œç¼–ç¨‹"}},[t._v("#")]),t._v(" ç¬¬ä¸ƒç«  ç½‘ç»œç¼–ç¨‹")]),t._v(" "),a("h3",{attrs:{id:"_7-1-æ„å»ºtcpæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-æ„å»ºtcpæœåŠ¡"}},[t._v("#")]),t._v(" 7.1 æ„å»ºTCPæœåŠ¡")]),t._v(" "),a("p",[t._v("ç›®å‰å¤§å¤šæ•°åº”ç”¨éƒ½æ˜¯åŸºäºTCPæ­å»ºè€Œæˆçš„")]),t._v(" "),a("h4",{attrs:{id:"_7-1-1-tcp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-1-tcp"}},[t._v("#")]),t._v(" 7.1.1 TCP")]),t._v(" "),a("p",[t._v("TCP,Transmission Control Prototal,ä¼ è¾“æ§åˆ¶åè®®ï¼Œåœ¨OSIæ¨¡å‹ä¸­å±äºä¼ è¾“å±‚åè®®ã€‚"),a("br"),t._v("\nOSIæ¨¡å‹ç”±ä¸ƒå±‚ç»„æˆï¼šç‰©ç†å±‚ï¼Œæ•°æ®é“¾ç»“å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼Œä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("åº”ç”¨å±‚")]),t._v(" "),a("th",[t._v("è¡¨ç¤ºå±‚")]),t._v(" "),a("th",[t._v("ä¼šè¯å±‚")]),t._v(" "),a("th",[t._v("ä¼ è¾“å±‚")]),t._v(" "),a("th",[t._v("ç½‘ç»œå±‚")]),t._v(" "),a("th",[t._v("é“¾è·¯å±‚")]),t._v(" "),a("th",[t._v("ç‰©ç†å±‚")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("HTTP/SMTP/IMAPç­‰")]),t._v(" "),a("td",[t._v("åŠ å¯†/è§£å¯†ç­‰")]),t._v(" "),a("td",[t._v("é€šä¿¡è¿æ¥/ç»´æŒä¼šè¯")]),t._v(" "),a("td",[t._v("TCP/UDP")]),t._v(" "),a("td",[t._v("IP")]),t._v(" "),a("td",[t._v("ç½‘ç»œç‰¹æœ‰çš„é“¾è·¯æ¥å£")]),t._v(" "),a("td",[t._v("ç½‘ç»œç‰©ç†ç¡¬ä»¶")])])])]),t._v(" "),a("h4",{attrs:{id:"_7-1-2-åˆ›å»ºtcpæœåŠ¡å™¨ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-2-åˆ›å»ºtcpæœåŠ¡å™¨ç«¯"}},[t._v("#")]),t._v(" 7.1.2 åˆ›å»ºTCPæœåŠ¡å™¨ç«¯")]),t._v(" "),a("p",[t._v("æœåŠ¡å™¨ç«¯å³æ¥æ”¶è¯·æ±‚çš„ä¸€ç«¯")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" net "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½ å¥½'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¿æ¥æ–­å¼€'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¬¢è¿å…‰ä¸´~'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server bound'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å‡ºé”™ï¼ŒUnhandled 'error' event")]),t._v(" "),a("h4",{attrs:{id:"_7-1-3-tcpæœåŠ¡çš„äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-3-tcpæœåŠ¡çš„äº‹ä»¶"}},[t._v("#")]),t._v(" 7.1.3 TCPæœåŠ¡çš„äº‹ä»¶")]),t._v(" "),a("h5",{attrs:{id:"_1-æœåŠ¡å™¨äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æœåŠ¡å™¨äº‹ä»¶"}},[t._v("#")]),t._v(" 1.æœåŠ¡å™¨äº‹ä»¶")]),t._v(" "),a("p",[t._v("é€šè¿‡net.createServer()åˆ›å»ºçš„æœåŠ¡å™¨è€Œè¨€ï¼Œå®ƒæ˜¯ä¸€ä¸ªEventEmitterå®ä¾‹ï¼Œæœ‰å¦‚ä¸‹è‡ªå®šä¹‰äº‹ä»¶")]),t._v(" "),a("p",[a("strong",[t._v("listening")]),t._v(": è¯¥äº‹ä»¶åœ¨è°ƒç”¨server.listen()ç»‘å®šç«¯å£æˆ–è€…Domain Socketåå‡ºå‘ï¼Œç®€æ´å†™æ³•ä¸ºserver.listen(port, listeningListener)ï¼Œé€šè¿‡listen()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ã€‚"),a("br"),t._v(" "),a("strong",[t._v("connection")]),t._v(":è¯¥äº‹ä»¶åœ¨æ¯ä¸ª"),a("strong",[t._v("å®¢æˆ·ç«¯")]),t._v("è¿æ¥åˆ°æœåŠ¡å™¨ç«¯æ—¶è§¦å‘ï¼Œç®€æ´å†™æ³•ä¸ºé€šè¿‡net.createServer()ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’"),a("br"),t._v(" "),a("strong",[t._v("close")]),t._v(": è¯¥äº‹ä»¶åœ¨æœåŠ¡å™¨å…³é—­æ—¶è§¦å‘ï¼Œåœ¨è°ƒç”¨server.close()åï¼ŒæœåŠ¡å™¨å°†åœæ­¢æ¥æ”¶æ–°çš„å¥—æ¥å­—è¿æ¥ï¼Œä½†ä¿æŠ¤å½“å‰å­˜åœ¨çš„è¿æ¥ï¼Œç­‰å¾…æ‰€æœ‰è¿æ¥éƒ½æ–­å¼€åï¼Œä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚"),a("br"),t._v(" "),a("strong",[t._v("error")]),t._v(": è¯¥äº‹ä»¶åœ¨æœåŠ¡å™¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå°†ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œæ¯”å¦‚ä¾¦å¬ä¸€ä¸ªä½¿ç”¨ä¸­çš„ç«¯å£ï¼Œå°†ä¼šè§¦å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚æœä¸ä¾¦å¬erroräº‹ä»¶ï¼ŒæœåŠ¡å™¨å°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚")]),t._v(" "),a("h5",{attrs:{id:"_2-è¿æ¥äº‹ä»¶-æœ¬ä¾‹å¯ä»¥ç†è§£ä¸ºsocketä¸Šçš„äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¿æ¥äº‹ä»¶-æœ¬ä¾‹å¯ä»¥ç†è§£ä¸ºsocketä¸Šçš„äº‹ä»¶"}},[t._v("#")]),t._v(" 2.è¿æ¥äº‹ä»¶(æœ¬ä¾‹å¯ä»¥ç†è§£ä¸ºsocketä¸Šçš„äº‹ä»¶)")]),t._v(" "),a("p",[t._v("æœåŠ¡å™¨å¯ä»¥åŒæ—¶ä¸å¤šä¸ªå®¢æˆ·ç«¯ä¿æŒè¿æ¥ï¼Œå¯¹äºæ¯ä¸ªè¿æ¥è€Œè¨€æ˜¯å…¸å‹çš„å¯è¯»å¯å†™"),a("strong",[t._v("Streamå¯¹è±¡")]),t._v("ã€‚"),a("strong",[t._v("Streamå¯¹è±¡")]),t._v("å¯ä»¥ç”¨äºæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ï¼Œæ—¢å¯ä»¥é€šè¿‡dataäº‹ä»¶ä»ä¸€æ®µè¯»å–å¦ä¸€ç«¯å‘æ¥çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡write()æ–¹æ³•ä»ä¸€ç«¯å‘å¦ä¸€ç«¯å‘é€æ•°æ®ã€‚å®ƒæœ‰å¦‚ä¸‹è‡ªå®šä¹‰äº‹ä»¶ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("data")]),t._v(": å½“ä¸€ç«¯è°ƒç”¨write()å‘é€æ•°æ®æ—¶ï¼Œå¦ä¸€ç«¯ä¼šè§¦å‘dataäº‹ä»¶ï¼Œäº‹ä»¶ä¼ é€’çš„æ•°æ®å³æ˜¯write()å‘é€çš„æ•°æ®"),a("br"),t._v(" "),a("strong",[t._v("end")]),t._v(": å½“è¿æ¥ä¸­çš„ä»»æ„ä¸€ç«¯å‘é€äº†FINæ•°æ®æ—¶ï¼Œå°†ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚"),a("br"),t._v(" "),a("strong",[t._v("connect")]),t._v(": è¯¥äº‹ä»¶ç”¨äºå®¢æˆ·ç«¯ï¼Œå½“å¥—æ¥å­—ä¸æœåŠ¡å™¨è¿æ¥æˆåŠŸæ—¶ä¼šè¢«è§¦å‘"),a("br"),t._v(" "),a("strong",[t._v("drain")]),t._v(": å½“ä»»æ„ä¸€ç«¯è°ƒç”¨write()å‘é€æ•°æ®æ—¶ï¼Œå½“å‰è¿™ç«¯ä¼šè§¦å‘è¯¥äº‹ä»¶"),a("br"),t._v(" "),a("strong",[t._v("error")]),t._v(": å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚"),a("br"),t._v(" "),a("strong",[t._v("close")]),t._v(": æ”¾å¥—æ¥å­—å®Œå…¨å…³é—­æ—¶ï¼Œè§¦å‘è¯¥äº‹ä»¶ã€‚"),a("br"),t._v(" "),a("strong",[t._v("timeout")]),t._v("ï¼šå½“ä¸€å®šäº‹ä»¶åè¿æ¥ä¸å†æ´»è·ƒæ—¶ï¼Œè¯¥äº‹ä»¶å°†ä¼šè¢«è§¦å‘ï¼Œé€šçŸ¥ç”¨æˆ·å½“å‰è¯¥è¿æ¥å·²ç»è¢«é—²ç½®äº†ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œç”±äºTCPå¥—æ¥å­—æ˜¯å¯è¯»å¯å†™çš„Streamå¯¹è±¡ï¼Œå¯ä»¥åˆ©ç”¨pipe()æ–¹æ³•å·§å¦™åœ°å®ç°ç®¡é“æ“ä½œï¼Œå¦‚ä¸‹ä»£ç å®ç°äº†ä¸€ä¸ªechoæœåŠ¡å™¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" net "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Echo server'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_7-2-æ„å»ºudpæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-æ„å»ºudpæœåŠ¡"}},[t._v("#")]),t._v(" 7.2 æ„å»ºUDPæœåŠ¡")]),t._v(" "),a("p",[t._v("// Todo")]),t._v(" "),a("h3",{attrs:{id:"_7-3-æ„å»ºhttpæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-æ„å»ºhttpæœåŠ¡"}},[t._v("#")]),t._v(" 7.3 æ„å»ºHTTPæœåŠ¡")]),t._v(" "),a("p",[t._v("TCPå’ŒUDPéƒ½å±äºç½‘ç»œä¼ è¾“å±‚åè®®ï¼Œå¦‚æœè¦æ„å»ºé«˜æ•ˆåœ°ç½‘ç»œåº”ç”¨ï¼Œå°±åº”è¯¥ä»ä¼ è¾“å±‚ç€æ‰‹ã€‚ä½†æ˜¯å¯¹äºç»å…¸çš„åº”ç”¨åœºæ™¯ï¼Œåˆ™æ— éœ€ä»ä¼ è¾“å±‚åè®®å…¥æ‰‹æ„é€ è‡ªå·±çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPæˆ–SMTPç­‰ï¼Œè¿™äº›ç»å…¸çš„åº”ç”¨å±‚åè®®å¯¹äºæ™®é€šåº”ç”¨è€Œè¨€ç»°ç»°æœ‰ä½™ã€‚Nodeæä¾›äº†åŸºæœ¬çš„httpå’Œhttpsæ¨¡å—ç”¨äºHTTPå’ŒHTTPSçš„å°è£…ï¼Œå¯¹äºå…¶ä»–åº”ç”¨å±‚åè®®çš„å°è£…ï¼Œä¹Ÿèƒ½ä»ç¤¾åŒºä¸­è½»æ¾æ‰¾åˆ°å…¶å®ç°ã€‚"),a("br"),t._v("\nå®ç°ä¸€ä¸ªHTTPæœåŠ¡å™¨æå…¶å®¹æ˜“ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server start'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_7-3-1-http"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-1-http"}},[t._v("#")]),t._v(" 7.3.1 HTTP")]),t._v(" "),a("p",[t._v("HyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®,HTTPæ„å»ºåœ¨TCPä¹‹ä¸Šï¼Œå±äºåº”ç”¨å±‚åè®®ï¼Œåœ¨HTTPçš„ä¸¤ç«¯æ˜¯æœåŠ¡å™¨å’Œæµè§ˆå™¨ï¼Œå³è‘—åçš„B/Sæ¨¡å¼ï¼Œå¦‚ä»Šç²¾å½©çº·å‘ˆçš„Webå³æ˜¯HTTPçš„åº”ç”¨ã€‚(appä¹Ÿæ˜¯HTTPåº”ç”¨)")]),t._v(" "),a("p",[t._v("ç°åœ¨çš„åº”ç”¨ï¼Œå¦‚æµè§ˆå™¨ï¼Œå…¶å®æ˜¯ä¸€ä¸ª"),a("strong",[t._v("HTTPçš„ä»£ç†")]),t._v("ï¼Œç”¨æˆ·çš„è¡Œä¸ºå°†ä¼šé€šè¿‡å®ƒè½¬æ¢ä¸ºHTTPè¯·æ±‚æŠ¥æ–‡å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯åœ¨å¤„ç†è¯·æ±‚åï¼Œå‘é€å“åº”æŠ¥æ–‡ç»™ä»£ç†ï¼Œä»£ç†åœ¨è§£ææŠ¥æ–‡åï¼Œå°†ç”¨æˆ·éœ€è¦çš„å†…å®¹å‘ˆç°åœ¨ç•Œé¢ä¸Šã€‚")]),t._v(" "),a("p",[t._v("åœ¨linuxå‘½ä»¤è¡Œï¼Œå¯ä»¥ä½¿ç”¨ curlå‘é€è¯·æ±‚"),a("br"),t._v("\n// HTTPæŠ¥æ–‡ï¼Œtodo")]),t._v(" "),a("h4",{attrs:{id:"_7-3-2-httpæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-2-httpæ¨¡å—"}},[t._v("#")]),t._v(" 7.3.2 httpæ¨¡å—")]),t._v(" "),a("p",[t._v("åœ¨Nodeä¸­,HTTPæœåŠ¡ç»§æ‰¿è‡ªTCPæœåŠ¡(netæ¨¡å—),å®ƒèƒ½å¤Ÿä¸å¤šä¸ªå®¢æˆ·ç«¯ä¿æŒè¿æ¥ï¼Œç”±äºå…¶é‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å½¢å¼ï¼Œå¹¶ä¸ä¸ºæ¯ä¸€ä¸ªè¿æ¥åˆ›å»ºé¢å¤–çš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œä¿æŒå¾ˆä½çš„å†…å­˜å ç”¨ï¼Œæ‰€ä»¥èƒ½å®ç°é«˜å¹¶å‘ã€‚HTTPæœåŠ¡äºTCPæœåŠ¡æ¨¡å‹ç”±åŒºåˆ«çš„åœ°æ–¹åœ¨äºï¼Œåœ¨å¼€å¯keep-aliveåï¼Œä¸€ä¸ªTCPä¼šè¯å¯ä»¥ç”¨äºå¤šæ¬¡è¯·æ±‚å’Œç›¸åº”ï¼ŒTCPæœåŠ¡ä»¥connectionä¸ºå•ä½è¿›è¡Œuã€æœåŠ¡ï¼ŒHTTPæœåŠ¡ä»¥requestä¸ºå•ä½è¿›è¡ŒæœåŠ¡ï¼Œhttpæ¨¡å—å³ä½¿å°†connectionåˆ°requestçš„è¿‡ç¨‹è¿›è¡Œäº†å°è£…ã€‚"),a("br"),t._v("\nåœ¨è¯·æ±‚äº§ç”Ÿçš„è¿‡ç¨‹ä¸­ï¼Œhttpæ¨¡å—é‚£å¤§è¿æ¥ä¸­ä¼ æ¥çš„æ•°æ®ï¼Œè°ƒç”¨äºŒè¿›åˆ¶æ¨¡å—http_parserè¿›è¡Œè§£æï¼Œ"),a("strong",[t._v("åœ¨è§£æå®Œè¯·æ±‚æŠ¥æ–‡çš„æŠ¥å¤´åï¼Œè§¦å‘requestäº‹ä»¶ï¼Œè°ƒç”¨ç”¨æˆ·çš„ä¸šåŠ¡é€»è¾‘")])]),t._v(" "),a("p",[a("strong",[t._v("HTTPè¯·æ±‚")]),a("br"),t._v("\nreq.method: è¯·æ±‚æ–¹æ³•ï¼Œå€¼ä¸ºGETï¼ŒPOST,DELETE,PUT.CONNECTç­‰"),a("br"),t._v("\nreq.urlï¼š/ç­‰"),a("br"),t._v("\nreq.httpVersion: 1.1ç­‰"),a("br"),t._v("\nå…¶ä½™æŠ¥å¤´ä¼šè®®ä¸Šè‚¡ä¸ªåˆ«è§„å¾‹çš„key:valueæ ¼å¼ï¼Œåœ¨è§£æåæ–¹ç›’å­åœ¨req.headerså±æ€§ä¸Šä¼ é€’ç»™ä¸šåŠ¡é€»è¾‘ä»¥ä¾›è°ƒç”¨")]),t._v(" "),a("p",[a("strong",[t._v("HTTPå“åº”")]),a("br"),t._v("\nå“åº”å¤´éƒ¨ä¿¡æ¯çš„APIï¼šreq.setHead,(è¿™ä¸ªè²Œä¼¼æ²¡æ‰¾åˆ°ç”¨å¤„?) req.setHeader")]),t._v(" "),a("p",[t._v("å¦‚åŒTCPæœåŠ¡ä¸€æ ·ï¼ŒhttpæœåŠ¡å™¨ä¹ŸæŠ½è±¡äº†ä¸€äº›æ—¶é—´ï¼Œä»¥ä¾›åº”ç”¨å±‚ä½¿ç”¨ï¼ŒæœåŠ¡å™¨ä¹Ÿæ˜¯ä¸€ä¸ªEventEmitterå®ä¾‹ã€‚"),a("br"),t._v("\nconnectionäº‹ä»¶ï¼šåœ¨å¼€å§‹httpè¯·æ±‚å’Œå“åº”å‰ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯éœ€è¦å»ºç«‹åº•å±‚çš„TCPè¿æ¥ï¼Œè¿™ä¸ªè¿æ¥å¯èƒ½å› ä¸ºå¼€å¯äº†keep-aliveï¼Œå¯ä»¥åœ¨å¤šæ¬¡è¯·æ±‚å“åº”ä¹‹é—´ä½¿ç”¨ï¼Œå½“è¿™ä¸ªè¿æ¥å»ºç«‹æ—¶ï¼ŒæœåŠ¡å™¨è§¦å‘ä¸€æ¬¡connectionäº‹ä»¶ã€‚"),a("br"),t._v("\nrequestäº‹ä»¶ï¼šå»ºç«‹TCPè¿æ¥åï¼Œhttpæ¨¡å—åº•å±‚å°†åœ¨æ•°æ®æµä¸­æŠ½è±¡å‡ºHTTPè¯·æ±‚å’ŒHTTPå“åº”ï¼Œå½“å¼ºæ±‚æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œåœ¨è§£æå‡ºHTTPè¯·æ±‚å¤´åï¼Œå°†ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œåœ¨res.end()åï¼ŒTCPè¿æ¥å¯èƒ½å°†ç”¨äºä¸‹ä¸€æ¬¡è¯·æ±‚å“åº”ã€‚"),a("br"),t._v("\ncloseäº‹ä»¶ï¼šä¸TCPæœåŠ¡å™¨çš„è¡Œä¸ºä¸€è‡´ã€‚"),a("br"),t._v("\ncheckContinueäº‹ä»¶ï¼š ã€‚ã€‚ã€‚"),a("br"),t._v("\nconnectäº‹ä»¶ï¼š"),a("br"),t._v("\nupgradeäº‹ä»¶ï¼š"),a("br"),t._v("\nclientErroräº‹ä»¶")]),t._v(" "),a("h4",{attrs:{id:"_7-3-3-httpå®¢æˆ·ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-3-httpå®¢æˆ·ç«¯"}},[t._v("#")]),t._v(" 7.3.3 HTTPå®¢æˆ·ç«¯")]),t._v(" "),a("p",[t._v("å³ç”¨äº"),a("strong",[t._v("å‘é€è¯·æ±‚")]),t._v("çš„ä¸€æ®µï¼Œnodeæ¨¡å—æä¾›çš„apiä¸º: http.request(options,connect),ç”¨äºæ„é€ httpå®¢æˆ·ç«¯ï¼Œä¸curlå‘½ä»¤å¤§è‡´ç›¸åŒ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1334")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'STATUS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HEADERS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_7-4-æ„å»ºwebsocketæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-æ„å»ºwebsocketæœåŠ¡"}},[t._v("#")]),t._v(" 7.4 æ„å»ºWebSocketæœåŠ¡")]),t._v(" "),a("p",[t._v("ç›¸æ¯”HTTPï¼ŒWebSocketæ›´æ¥è¿‘äºä¼ è¾“å±‚åè®®ï¼Œå®ƒå¹¶æ²¡æœ‰åœ¨HTTPçš„åŸºç¡€ä¸Šæ¨¡æ‹ŸæœåŠ¡å™¨ç«¯çš„å‘é€ï¼Œè€Œæ˜¯åœ¨TCPä¸Šå®šä¹‰ç‹¬ç«‹çš„åè®®ï¼Œè®©äººè¿·è·¯çš„éƒ¨åˆ†åœ¨äºWebSocketçš„æ¡æ‰‹éƒ¨åˆ†æ˜¯ç”±HTTPå®Œæˆçš„ï¼Œä½¿äººå¯èƒ½è§‰å¾—å®ƒå¯èƒ½æ˜¯åŸºäºHTTPå®ç°çš„ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-4-1-websocketæ¡æ‰‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-1-websocketæ¡æ‰‹"}},[t._v("#")]),t._v(" 7.4.1 WebSocketæ¡æ‰‹")]),t._v(" "),a("p",[t._v("è¯·æ±‚æŠ¥æ–‡")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chat "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\nHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚æœåŠ¡å‡çº§åè®®ä¸ºWebSocket")]),t._v("\nUpgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" websocket\nConnection"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Upgrade\nSec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("WebSocket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" dGhlIHn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®‰å…¨æ ¡éªŒ")]),t._v("\nSec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("WebSocket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Prototal"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" chat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" superchat  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­åè®®")]),t._v("\nSec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Websocket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç‰ˆæœ¬å·")]),t._v("\n")])])]),a("p",[t._v("å“åº”æŠ¥æ–‡")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v(" Switching Protocols\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°åº”ç”¨å±‚åè®®ä¸ºWebSocketåè®®")]),t._v("\nUpgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" websocket\nConnection"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Upgrade\nSec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("WebSocket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Accept"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" s3pPl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nSec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("WebSocket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Prototal"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" chat\n")])])]),a("p",[t._v("nodeä»£ç éƒ¨åˆ† // Todo")]),t._v(" "),a("h4",{attrs:{id:"_7-4-2-websocketæ•°æ®ä¼ è¾“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-2-websocketæ•°æ®ä¼ è¾“"}},[t._v("#")]),t._v(" 7.4.2 WebSocketæ•°æ®ä¼ è¾“")]),t._v(" "),a("p",[t._v("åœ¨æ¡æ‰‹é¡ºåˆ©å®Œæˆåï¼Œå½“å‰è¿æ¥ä¸å†è¿›è¡ŒHTTPçš„äº¤äº’ï¼Œè€Œæ˜¯å¼€å§‹WebSocketçš„æ•°æ®å¸§åè®®ï¼Œå®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„æ•°æ®äº¤æ¢ï¼Œæ¡æ‰‹å®Œæˆåï¼Œå®¢æˆ·ç«¯çš„onopen()å°†ä¼šè¢«è§¦å‘æ‰§è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onopen")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¦åšçš„äº‹æƒ…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æœåŠ¡å™¨ç«¯ã€‚ // Todo")]),t._v(" "),a("h3",{attrs:{id:"_7-5-ç½‘ç»œæœåŠ¡ä¸å®‰å…¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-ç½‘ç»œæœåŠ¡ä¸å®‰å…¨"}},[t._v("#")]),t._v(" 7.5 ç½‘ç»œæœåŠ¡ä¸å®‰å…¨")]),t._v(" "),a("p",[t._v("ä¸ºé˜²æ­¢æ•°æ®è¢«ç›‘å¬ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®åŠ å¯†åå†è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œä½†æ˜¯å¯¹äºåº”ç”¨å±‚è€Œè¨€ï¼Œå¦‚HTTPï¼ŒFTPç­‰ï¼Œæˆ‘ä»¬ä»å¸Œæœ›èƒ½å¤Ÿé€æ˜çš„å¤„ç†æ•°æ®ï¼Œè€Œæ— éœ€æ“å¿ƒç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨é—®é¢˜ã€‚"),a("br"),t._v("\nSSL Secure Sockets Layerï¼Œå®‰å…¨åµŒå¥—å±‚ï¼ŒSSLä½œä¸ºä¸€ç§å®‰å…¨åè®®ï¼Œå®ƒåœ¨ä¼ è¾“å±‚æä¾›å¯¹ç½‘ç»œè¿æ¥åŠ å¯†çš„åŠŸèƒ½ã€‚å¯¹äºåº”ç”¨å±‚è€Œè¨€ï¼Œå®ƒæ˜¯é€æ˜çš„ï¼Œæ•°æ®åœ¨ä¼ é€’åˆ°åº”ç”¨å±‚ä¹‹å‰å°±å·²ç»å®Œæˆäº†åŠ å¯†å’Œè§£å¯†çš„è¿‡ç¨‹ã€‚æœ€åˆçš„SSLåº”ç”¨åœ¨Webä¸Šï¼Œè¢«æ”¾æœåŠ¡å™¨ç«¯å’Œæµè§ˆå™¨ç«¯åŒæ—¶æ”¯æŒï¼Œå¯¹å¼IEIFå°†å…¶æ ‡å‡†åŒ–ï¼Œæˆä¸ºTLS(Transport Layer Security, å®‰å…¨ä¼ è¾“å±‚åè®®)"),a("br"),t._v("\nNodeåœ¨ç½‘ç»œå®‰å…¨ä¸Šæä¾›äº†3ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«ä¸ºcrypto, tls, https.å…¶ä¸­cryptoä¸»è¦ç”¨äºåŠ å¯†è§£å¯†ï¼ŒSHAI,MD5ç­‰åŠ å¯†ç®—æ³•éƒ½åœ¨å…¶ä¸­æœ‰ä½“ç°ï¼ŒçœŸæ­£ç”¨äºç½‘ç»œçš„æ˜¯å¦å¤–ä¸¤ä¸ªæ¨¡å—ï¼Œtlsæ¨¡å—æä¾›äº†ä¸netæ¨¡å—ç±»ä¼¼çš„åŠŸèƒ½ï¼ŒåŒºåˆ«åœ¨äºå®ƒå»ºç«‹åœ¨TLS/SSLåŠ å¯†çš„TCPè¿æ¥ä¸Šï¼Œå¯¹äºhttpsè€Œè¨€ï¼Œå®ƒå®Œå…¨ä¸httpæ¨¡å—æ¥å£ä¸€è‡´ï¼ŒåŒºåˆ«ä¹Ÿä»…åœ¨äºå®ƒå»ºç«‹å®‰å…¨çš„è¿æ¥ä¹‹ä¸Šã€‚")]),t._v(" "),a("h4",{attrs:{id:"_7-5-1-tls-ssl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-1-tls-ssl"}},[t._v("#")]),t._v(" 7.5.1 TLS/SSL")]),t._v(" "),a("ol",[a("li",[t._v("ç§˜é’¥\nTLS/SSLæ˜¯ä¸€ç§å…¬é’¥/ç§é’¥çš„ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¯¹ç§°ç»“æ„ï¼Œæ¯ä¸ªæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½æœ‰è‡ªå·±çš„å…¬ç§é’¥ï¼Œå…¬é’¥ç”¨æ¥åŠ å¯†è¦ä¼ è¾“çš„æ•°æ®ï¼Œç§é’¥ç”¨æ¥è§£å¯†æ¥æ”¶æ”¶åˆ°çš„æ•°æ®\n// Todo")]),t._v(" "),a("li",[t._v("æ•°å­—è¯ä¹¦\n// Todo Todo")])]),t._v(" "),a("h4",{attrs:{id:"_7-5-2-tlsæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-2-tlsæœåŠ¡"}},[t._v("#")]),t._v(" 7.5.2 TLSæœåŠ¡")]),t._v(" "),a("p",[t._v("åˆ©ç”¨tlsæ¨¡å—ï¼Œåœ¨åˆ›å»ºserverçš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ªoptionsçš„å¯¹è±¡å‚æ•°ï¼Œå…¶ä¸­åŒ…å«CAè¯ä¹¦")]),t._v(" "),a("h4",{attrs:{id:"_7-5-3-httpsæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-httpsæœåŠ¡"}},[t._v("#")]),t._v(" 7.5.3 HTTPSæœåŠ¡")]),t._v(" "),a("p",[t._v("HTTPSæœåŠ¡å°±æ˜¯å·¥ä½œåœ¨TLS/SSLä¸Šçš„HTTP"),a("br"),t._v("\nåˆ›å»ºHTTPSæœåŠ¡")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" https "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./keys/server.key'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  cert"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./keys/server.crt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("HTTPSå®¢æˆ·ç«¯ï¼Œä¹Ÿéœ€è¦æŒ‡å®šè¯ä¹¦çš„ç›¸å…³å‚æ•° // Todo")]),t._v(" "),a("h3",{attrs:{id:"_7-6-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-6-æ€»ç»“"}},[t._v("#")]),t._v(" 7.6 æ€»ç»“")]),t._v(" "),a("p",[t._v("NodeåŸºäºäº‹ä»¶é©±åŠ¨å’Œéé˜»å¡è®¾è®¡ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å°¤å…¶èƒ½å‘æŒ¥å‡ºå®ƒçš„ç‰¹é•¿ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨å¯ä»¥å®ç°ä¸å¤§é‡çš„å®¢æˆ·ç«¯è¿›è¡Œå¯¹æ¥ï¼Œéé˜»å¡è®¾è®¡åˆ™å¯ä»¥è®©å®ƒæ›´å¥½çš„æå‡ç½‘ç»œçš„å“åº”ååï¼ŒNodeæä¾›äº†ç›¸å¯¹åº•å±‚çš„ç½‘ç»œè°ƒç”¨ï¼Œä»¥åŠåŸºäºäº‹ä»¶çš„ç¼–ç¨‹æ¥å£ï¼Œä½¿å¾—å¼€å‘è€…åœ¨è¿™äº›æ¨¡å—ä¸Šååˆ†è½»æ¾çš„æ„å»ºç½‘ç»œåº”ç”¨")]),t._v(" "),a("h2",{attrs:{id:"ç¬¬å…«ç« -æ„å»ºwebåº”ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å…«ç« -æ„å»ºwebåº”ç”¨"}},[t._v("#")]),t._v(" ç¬¬å…«ç«  æ„å»ºWebåº”ç”¨")]),t._v(" "),a("h3",{attrs:{id:"_8-1-åŸºç¡€åŠŸèƒ½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-åŸºç¡€åŠŸèƒ½"}},[t._v("#")]),t._v(" 8.1 åŸºç¡€åŠŸèƒ½")]),t._v(" "),a("p",[t._v("æœ¬ç« Webåº”ç”¨æ–¹é¢çš„å†…å®¹ï¼Œå°†ä»httpæ¨¡å—ä¸­çš„æœåŠ¡å™¨ç«¯çš„requestäº‹ä»¶å¼€å§‹åˆ†æã€‚requestäº‹ä»¶å‘ç”Ÿäºç½‘ç»œè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯è§£ææŠ¥æ–‡ï¼Œå‘ç°HTTPè¯·æ±‚çš„æŠ¥å¤´æ—¶ï¼Œåœ¨å·²è§¦å‘requestäº‹ä»¶å‰ï¼Œå®ƒå·²å‡†å¤‡å¥½ServerRequestå’ŒServerResponseå¯¹è±¡ä»¥ä¾›å¯¹è¯·æ±‚å’Œå“åº”æŠ¥æ–‡çš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œå®˜æ–¹çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œå°±æ˜¯è°ƒç”¨ServerResponseå®ç°å“åº”çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1337")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æœåŠ¡å¯åŠ¨å•¦~'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¯¹äºä¸€ä¸ªWebåº”ç”¨è€Œè¨€ï¼Œä»…ä»…åªæ˜¯ä¸Šé¢è¿™æ ·çš„å“åº”è¿œè¿œè¾¾ä¸åˆ°ä¸šåŠ¡çš„éœ€æ±‚ï¼Œåœ¨å…·ä½“çš„ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¦‚ä¸‹è¿™äº›éœ€æ±‚ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("è¯·æ±‚æ–¹æ³•çš„åˆ¤æ–­")]),t._v(" "),a("li",[t._v("URLçš„è·¯å¾„è§£æ")]),t._v(" "),a("li",[t._v("URLä¸­æŸ¥è¯¢å­—ç¬¦ä¸²è§£æ")]),t._v(" "),a("li",[t._v("Cookieçš„è§£æ")]),t._v(" "),a("li",[t._v("è®¤è¯")]),t._v(" "),a("li",[t._v("è¡¨å•æ•°æ®çš„è§£æ")]),t._v(" "),a("li",[t._v("ä»»æ„æ ¼å¼æ–‡ä»¶çš„ä¸Šä¼ å¤„ç†")])]),t._v(" "),a("h4",{attrs:{id:"_8-1-1-è¯·æ±‚æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-1-è¯·æ±‚æ–¹æ³•"}},[t._v("#")]),t._v(" 8.1.1 è¯·æ±‚æ–¹æ³•")]),t._v(" "),a("p",[t._v("é™¤äº†æœ€å¸¸è§çš„GET, POSTä¹‹å¤–ï¼Œè¿˜æœ‰HEAD, DELETE, PUT, CONNECTç­‰æ–¹æ³•ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†GET, POSTä¸¤ç±»è¯·æ±‚æ–¹æ³•ï¼Œä½†æ˜¯åœ¨Restfulç±»webæœåŠ¡ä¸­å¿ƒè¯·æ±‚æ–¹æ³•ååˆ†é‡è¦ï¼Œå› ä¸ºå®ƒä¼šå†³å®šèµ„æºçš„æ“ä½œè¡Œä¸ºã€‚PUTä»£è¡¨æ–°å»ºä¸€ä¸ªèµ„æºï¼ŒPOSTè¡¨ç¤ºè¦æ›´æ–°ä¸€ä¸ªèµ„æºï¼ŒGETè¡¨ç¤ºæŸ¥çœ‹ä¸€ä¸ªèµ„æºï¼Œè€ŒDELETEè¡¨ç¤ºåˆ é™¤ä¸€ä¸ªèµ„æºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ–¹æ³•æ¥å†³å®šå“åº”è¡Œä¸ºï¼Œå¦‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DELETE'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-1-2-è·¯å¾„è§£æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-2-è·¯å¾„è§£æ"}},[t._v("#")]),t._v(" 8.1.2 è·¯å¾„è§£æ")]),t._v(" "),a("p",[t._v("HTTP_Parserå°†å…¶è§£æä¸ºreq.url, hashéƒ¨åˆ†ä¼šè¢«ä¸¢æ‰"),a("br"),t._v("\nä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ˜¯æ ¹æ®è·¯å¾„è¿›è¡Œä¸šåŠ¡å¤„ç†çš„åº”ç”¨æ˜¯é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æ ¹æ®è·¯å¾„æ¥é€‰æ‹©æ§åˆ¶å™¨")]),t._v(" "),a("h4",{attrs:{id:"_8-1-3-æŸ¥è¯¢å­—ç¬¦ä¸²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-3-æŸ¥è¯¢å­—ç¬¦ä¸²"}},[t._v("#")]),t._v(" 8.1.3 æŸ¥è¯¢å­—ç¬¦ä¸²")]),t._v(" "),a("p",[t._v("åœ¨åœ°å€æ è·¯å¾„åçš„"),a("code",[t._v("?foo=bar&baz=val")]),t._v("å¯ä»¥ä½¿ç”¨nodeæ ¸å¿ƒæ¨¡å—querystringï¼Œ"),a("code",[t._v("querystring.parse(req.url.split(?)[1])")]),t._v(", å½“ç„¶æ›´ç®€æ´çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¼•å…¥æ ¸å¿ƒæ¨¡å—url,"),a("code",[t._v("url.parse(req.url,true).query")])]),t._v(" "),a("h4",{attrs:{id:"_8-1-4-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-4-cookie"}},[t._v("#")]),t._v(" 8.1.4 Cookie")]),t._v(" "),a("p",[t._v("HTTPæ˜¯æ— çŠ¶æ€çš„ï¼Œç°å®ä¸­çš„åº”ç”¨å´éœ€è¦ä¸€å®šçš„çŠ¶æ€ï¼Œå¦‚ä½•æ ‡è¯†å’Œè®¤è¯ä¸€ä¸ªç”¨æˆ·ï¼Œæœ€æ—©çš„æ–¹æ¡ˆå°±æ˜¯Cookieäº†")]),t._v(" "),a("p",[t._v("Cookieçš„å¤„ç†åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€Cookie")]),t._v(" "),a("li",[t._v("æµè§ˆå™¨å°†Cookieä¿å­˜")]),t._v(" "),a("li",[t._v("ä¹‹åæ¯æ¬¡æµè§ˆå™¨éƒ½ä¼šå°†Cookieå‘é€æœåŠ¡å™¨ç«¯")])]),t._v(" "),a("p",[t._v("å‘½ä»¤è¡Œæ¨¡æ‹Ÿå‘é€cookie "),a("code",[t._v('curl -v -H "Cookie: foo=bar; baz=val" "http://127.0.0.1:1337/path?foo=bar&baz=val"')])]),t._v(" "),a("p",[t._v("è·å–cookie"),a("code",[t._v("req.headers.cookie")]),t._v("ï¼Œcookieæ˜¯å­—ç¬¦ä¸²å¦‚"),a("code",[t._v("Cookie: foo=bar; baz=val")]),t._v("çš„æ–¹å¼ï¼Œå¯ä»¥å†™ä¸€ä¸ªå‡½æ•°è¿›è¡Œè§£æï¼Œå¦‚ä¸‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("parseCookie")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cookies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cookies\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pair "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cookies\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å“åº”å­—æ®µåœ¨Set-Cookieé‡Œé¢ï¼Œä¾‹å¦‚"),a("code",[t._v("Set-Cookie: name=value; Path=/; Expires=Sun, 23-Apr-23 09:01:35 GMT; Domain=domian.com")]),t._v(",ä¸»è¦é€‰é¡¹")]),t._v(" "),a("ul",[a("li",[t._v("pathï¼Œè¡¨ç¤ºcookieå½±å“åˆ°çš„è·¯å¾„")]),t._v(" "),a("li",[t._v("Expireså’ŒMax-Ageå‘ŠçŸ¥æµè§ˆå™¨ä½•æ—¶è¿‡æœŸ")]),t._v(" "),a("li",[t._v("HttpOnlyï¼Œå‘ŠçŸ¥æµè§ˆå™¨ä¸å¯ä»¥é€šè¿‡è„šæœ¬"),a("code",[t._v("document.cookie")]),t._v("å»æ›´æ”¹cookieå€¼")]),t._v(" "),a("li",[t._v("Secure: å½“è®¾ç½®ä¸ºtrueåªæœ‰åœ¨HTTPSä¸­æ‰æœ‰æ•ˆ")])]),t._v(" "),a("p",[t._v("Cookieçš„æ€§èƒ½é—®é¢˜ï¼šcookieåœ¨å‘é€æ¯æ¬¡è¯·æ±‚éƒ½ä¼šè¢«å¸¦åˆ°æœåŠ¡ç«¯ï¼Œä¼˜åŒ–ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å‡å°cookieå¤§å°")]),t._v(" "),a("li",[t._v("ä¸ºé™æ€èµ„æºä½¿ç”¨ä¸åŒçš„åŸŸå")]),t._v(" "),a("li",[t._v("å‡å°‘DNSæŸ¥è¯¢ï¼Ÿ")])]),t._v(" "),a("h4",{attrs:{id:"_8-1-5-session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-5-session"}},[t._v("#")]),t._v(" 8.1.5 Session")]),t._v(" "),a("p",[t._v("é€šè¿‡Cookieï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯ä»¥å®ç°çŠ¶æ€çš„è®°å½•ï¼Œä½†æ˜¯Cookieå¹¶éæ˜¯å®Œç¾çš„ï¼Œå‰æ–‡æåŠçš„ä½“ç§¯è¿‡å¤§å°±æ˜¯ä¸€ä¸ªæ˜¾è‘—çš„é—®é¢˜ï¼Œæœ€ä¸ºä¸¥é‡çš„é—®é¢˜æ˜¯Cookieå¯ä»¥åœ¨å‰åç«¯è¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤æ•°æ®å°±æå®¹æ˜“è¢«ç¯¡æ”¹å’Œä¼ªé€ ã€‚å¦‚æœæœåŠ¡ç«¯æœ‰éƒ¨åˆ†é€»è¾‘æ˜¯æ ¹æ®Cookieä¸­çš„isVIPå­—æ®µè¿›è¡Œåˆ¤æ–­ï¼Œé‚£ä¹ˆä¸€ä¸ªæ™®é€šç”¨æˆ·é€šè¿‡ä¿®æ”¹Cookieå°±å¯ä»¥è½»æ¾äº«å—åˆ°VIPæœåŠ¡äº†ï¼Œç»¼ä¸Šæ‰€è¿°ï¼ŒCookieå¯¹äºæ•æ„Ÿæ•°æ®çš„ä¿æŠ¤æ˜¯æ— æ•ˆçš„ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†è§£å†³Cookieæ•æ„Ÿæ•°æ®çš„é—®é¢˜ï¼ŒSessionåº”è¿è€Œç”Ÿã€‚Sessionçš„æ•°æ®å€¼ä¿ç•™åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯æ— æ³•ä¿®æ”¹ï¼Œè¿™æ ·æ•°æ®çš„å®‰å…¨æ€§å¾—åˆ°ä¸€å®šçš„ä¿éšœï¼Œæ•°æ®ä¹Ÿæ— éœ€åœ¨åè®®ä¸­æ¯æ¬¡éƒ½è¢«ä¼ é€’ã€‚")]),t._v(" "),a("p",[t._v("è™½ç„¶åœ¨æœåŠ¡ç«¯å­˜å‚¨æ•°æ®ååˆ†æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚ä½•å°†æ¯ä¸ªå®¢æˆ·å’ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼Œè¿™é‡Œæœ‰å¸¸è§çš„ä¸¤ç§å®ç°æ–¹å¼ã€‚")]),t._v(" "),a("ol",[a("li",[t._v("åŸºäºCookieæ¥å®ç°ç”¨æˆ·å’Œæ•°æ®çš„æ˜ å°„\nå°†å£ä»¤æ”¾åœ¨Cookieé‡Œé¢ï¼Œå£ä»¤å¦‚ä½•äº§ç”Ÿï¼Ÿä¸€èˆ¬æœåŠ¡å™¨ç«¯ä¼šçº¦å®šä¸€ä¸ªé”®å€¼ä½œä¸ºSessionçš„å£ä»¤ï¼Œè¿™ä¸ªå€¼å¯ä»¥éšæ„çº¦å®šï¼Œæ¯”å¦‚Connecté»˜è®¤é‡‡ç”¨connect_uidï¼Œä¸€æ—¦æœåŠ¡å™¨æ£€æŸ¥åˆ°ç”¨æˆ·è¯·æ±‚Cookieä¸­æ²¡æœ‰æºå¸¦è¯¥å€¼ï¼Œå®ƒå°±ä¼šä¸ºä¹‹ç”Ÿæˆä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼æ˜¯å”¯ä¸€ä¸”ä¸é‡è¯»çš„å€¼ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚ä»¥ä¸‹ä¸ºç”Ÿæˆsessionçš„ä»£ç ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" sessions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'session_id'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXPIRES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("generate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    expire"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXPIRES")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  sessions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" session\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ¯ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼Œæ£€æŸ¥Cookieä¸­çš„å£ä»¤ä¸æœåŠ¡å™¨ç«¯çš„æ•°æ®ï¼Œå¦‚æœè¿‡æœŸï¼Œå°±é‡æ–°ç”Ÿæˆï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expire "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°è¶…æ—¶æ—¶é—´")]),t._v("\n        session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expire "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXPIRES")]),t._v("\n        req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¶…æ—¶äº†ï¼Œåˆ é™¤æ—§çš„æ•°æ®ï¼Œå¹¶é‡æ–°ç”Ÿæˆ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" sessions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœsessionè¿‡æœŸæˆ–è€…å£ä»¤ä¸å¯¹ï¼Œé‡æ–°ç”ŸæˆSession")]),t._v("\n      req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å½“ç„¶ä»…ä»…é‡æ–°ç”ŸæˆSessionè¿˜ä¸è¶³ä»¥å®Œæˆæ•´ä¸ªæµç¨‹ï¼Œè¿˜éœ€è¦åœ¨å“åº”ç»™å®¢æˆ·ç«¯æ—¶è®¾ç½®æ–°çš„å€¼ï¼Œä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶èƒ½å¤Ÿå¯¹åº”æœåŠ¡å™¨ç«¯çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬hackå“åº”å¯¹è±¡çš„writeHead()æ–¹æ³•ï¼Œåœ¨å®ƒçš„å†…éƒ¨æ³¨å…¥è®¾ç½®Cookieçš„é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" writeHead "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("writeHead\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("writeHead")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cookies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Header'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è‡³æ­¤ï¼Œsessionåœ¨å‰åç«¯è¿›è¡Œå¯¹åº”çš„è¿‡ç¨‹å°±å®Œæˆäº†ï¼Œè¿™æ ·çš„ä¸šåŠ¡è·¯åŸºå¯ä»¥åˆ¤æ–­å’Œè®¾ç½®sessionï¼Œä»¥æ­¤æ¥ç»´æŠ¤ç”¨æˆ·å’ŒæœåŠ¡å™¨ç«¯çš„å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isVisit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isVisit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¬¢è¿ç¬¬ä¸€æ¬¡æ¥åˆ°åŠ¨ç‰©å›­'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åŠ¨ç‰©å›­å†æ¬¡æ¬¢è¿ä½ ï¼'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("ç¬¬äºŒç§ï¼šé€šè¿‡æŸ¥è¯¢å­—ç¬¦ä¸²æ¥å®ç°æµè§ˆå™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯æ•°æ®çš„å¯¹åº”")])]),t._v(" "),a("p",[t._v("åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬éƒ½å°†Sessionæ•°æ®ç›´æ¥å­˜åœ¨äº†å˜é‡sessionsä¸­ï¼Œå®ƒä½äºå†…å­˜ä¸­ï¼Œç„¶è€Œåœ¨ç¬¬äº”ç« çš„å†…å­˜æ§åˆ¶éƒ¨åˆ†ï¼Œæˆ‘ä»¬åˆ†æäº†ä¸ºä»€ä¹ˆNodeä¼šå­˜åœ¨å†…å­˜é™åˆ¶ï¼Œè¿™é‡Œå°†æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­å°†ä¼šå¸¦æ¥æå¤§çš„éšæ‚£ï¼Œå¦‚æœç”¨æˆ·å¢å¤šï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½å°±æ¥è§¦åˆ°äº†å†…å­˜é™åˆ¶çš„ä¸Šé™ï¼Œå¹¶ä¸”å†…å­˜ä¸­çš„æ•°æ®é‡åŠ å¤§ï¼Œå¿…ç„¶ä¼šå› æ­¤åƒåœ¾å›æ”¶çš„é¢‘ç¹æ‰«æï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚"),a("br"),t._v("\nå¦ä¸€ä¸ªé—®é¢˜åˆ™æ˜¯æˆ‘ä»¬å¯èƒ½ä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUè€Œå¯åŠ¨å¤šä¸ªè¿›ç¨‹ï¼Œç”¨æˆ·è¯·æ±‚çš„è¿æ¥å°†å¯èƒ½éšæ„åˆ†é…åˆ°å„ä¸ªè¿›ç¨‹ä¸­ï¼ŒNodeçš„è¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´æ˜¯ä¸èƒ½ç›´æ¥å…±äº«å†…å­˜çš„ï¼Œç”¨æˆ·çš„Sessionå¯èƒ½ä¼šæœ‰å¼•èµ·é”™ä¹±ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†è§£å†³æ€§èƒ½é—®é¢˜å’ŒSessionæ•°æ®æ— æ³•è·¨è¿›ç¨‹å…±äº«çš„é—®é¢˜ï¼Œå¸¸è§çš„æ–¹æ¡ˆæ˜¯å°†sessioné›†ä¸­åŒ–ï¼Œå°†åŸæœ¬å¯èƒ½åˆ†æ•£åœ¨å¤šä¸ªè¿›ç¨‹é‡Œçš„æ•°æ®ï¼Œç»Ÿä¸€è½¬ç§»åˆ°é›†ä¸­çš„æ•°æ®å­˜å‚¨ä¸­ï¼Œç›®å‰å¸¸ç”¨çš„å·¥å…·æ˜¯Redisã€Memcachedç­‰ã€‚é€šè¿‡è¿™äº›é«˜æ•ˆåœ°ç¼“å­˜ï¼ŒNodeè¿›ç¨‹æ— éœ€åœ¨å†…éƒ¨ç»´æŠ¤æ•°æ®å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶é—®é¢˜å’Œå†…å­˜é™åˆ¶é—®é¢˜éƒ½å¯ä»¥è¿åˆƒè€Œè§£ï¼Œå¹¶ä¸”è¿™äº›å‘Šè¯‰ç¼“å­˜è®¾è®¡çš„ç¼“å­˜è¿‡æœŸç­–ç•¥æ›´åˆç†é«˜æ•ˆï¼Œæ¯”åœ¨Nodeä¸­è‡ªè¡Œè®¾è®¡ç¼“å­˜ç­–ç•¥æ›´å¥½ã€‚")]),t._v(" "),a("p",[t._v("å°½ç®¡é‡‡ç”¨ä¸“é—¨çš„ç¼“å­˜æœåŠ¡å›é¿ç›´æ¥åœ¨å†…å­˜ä¸­è®¿é—®æ…¢ï¼Œä½†å…¶å½±å“å°ä¹‹åˆå°ï¼Œå¸¦æ¥çš„å¥½å¤„è¿œè¿œå¤§äºç›´æ¥åœ¨Nodeä¸­å­˜å‚¨æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("Sessionå®‰å…¨ï¼šé€šè¿‡ç§é’¥åŠ å¯†è¿›è¡Œç­¾å")]),t._v(" "),a("h5",{attrs:{id:"å®‰å…¨é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰å…¨é—®é¢˜"}},[t._v("#")]),t._v(" å®‰å…¨é—®é¢˜")]),t._v(" "),a("p",[t._v("XSSæ¼æ´"),a("br"),t._v("\nå…¨ç§°Cross-Site Scripting è·¨ç«™è„šæœ¬æ”»å‡»ã€‚XSSæ¼æ´ä¼šè®©æœ¬åœ°è„šæœ¬æ‰§è¡Œï¼Œå®ƒçš„å½¢æˆåŸå› å¤šæ•°æ˜¯ç”¨æˆ·çš„è¾“å…¥æ²¡æœ‰è¢«è½¬ä¹‰ï¼Œè€Œè¢«ç›´æ¥æ‰§è¡Œï¼Œæ¯”å¦‚æŸä¸ªç½‘ç«™çš„å‰ç«¯è„šæœ¬ï¼Œå®ƒä¼šå°†URL hashä¸­çš„å€¼è®¾ç½®åˆ°é¡µé¢ä¸­ï¼Œä»¥å®ç°æŸç§é€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#box'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("æ”»å‡»è€…åœ¨å‘ç°è¿™é‡Œçš„æ¼æ´ä¹‹åï¼Œæ„é€ æˆäº†è¿™æ ·çš„URL")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pathname#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://b.com/c.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("ä¸ºäº†ä¸è®©å—å®³è€…å‘ç°è¿™ç«¯URLä¸­çš„çŒ«è…»ï¼Œå®ƒå¯èƒ½ä¼šé€šè¿‡URLå‹ç¼©æˆä¸€ä¸ªçŸ­ç½‘å€ï¼Œå¦‚ä¸‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fasdfj\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ–è€…å†æ¬¡å‹ç¼©")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fasdfb\n")])])]),a("p",[t._v("ç„¶åå°†æœ€ç»ˆçš„çŸ­ç½‘å€å‘ç»™æŸä¸ªç™»å½•çš„åœ¨çº¿ç”¨æˆ·ï¼Œè¿™æ ·ä¸€æ¥ã€‚è¿™ç«¯hashä¸­çš„è„šæœ¬å°†ä¼šåœ¨è¿™ä¸ªç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œè€Œè¿™æ®µè„šæœ¬ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://c.com/?'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie\n")])])]),a("p",[t._v("è¿™æ®µä»£ç å°†è¯¥ç”¨æˆ·çš„Cookieæäº¤ç»™äº†c.comç«™ç‚¹ï¼Œè¿™ä¸ªç«™ç‚¹å°±æ˜¯æ”»å‡»è€…çš„æœåŠ¡å™¨ï¼Œä»–ä¹Ÿå°±èƒ½æ‹¿åˆ°è¯¥ç”¨æˆ·çš„Sessionå£ä»¤ï¼Œç„¶åä»–åœ¨å®¢æˆ·ç«¯é‚£ç§ç”¨è¿™ä¸ªå£ä»¤ä¼ªé€ Cookieï¼Œä»è€Œå®ç°äº†ä¼ªè£…ç”¨æˆ·çš„èº«ä»½ï¼Œå¦‚æœè¯¥ç”¨æˆ·æ˜¯ç½‘ç«™ç®¡ç†å‘˜ï¼Œå°±å¯èƒ½é€ æˆæå¤§çš„å±å®³")]),t._v(" "),a("h4",{attrs:{id:"_8-1-6-ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-6-ç¼“å­˜"}},[t._v("#")]),t._v(" 8.1.6 ç¼“å­˜")]),t._v(" "),a("p",[t._v("é€šå¸¸æ¥è¯´ï¼ŒPOST, DELETE, PUTè¿™ç±»å¸¦è¡Œä¸ºæ€§çš„è¯·æ±‚æ“ä½œä¸€èˆ¬ä¸åšä»»ä½•ç¼“å­˜ï¼Œå¤§å¤šæ•°ç¼“å­˜å€¼åº”ç”¨åœ¨GETè¯·æ±‚ä¸­ã€‚ä¸€èˆ¬å¯ä»¥é€šè¿‡æ·»åŠ "),a("code",[t._v("Expires Cache-Control Etags")]),t._v("æ¥å®ç°ç¼“å­˜")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("æœåŠ¡ç«¯")]),t._v(" "),a("th",[t._v("å®¢æˆ·ç«¯")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Last-Modefied")]),t._v(" "),a("td",[t._v("If-Modefied-Since")])]),t._v(" "),a("tr",[a("td",[t._v("Etag")]),t._v(" "),a("td",[t._v("If-None-Match")])])])]),t._v(" "),a("h4",{attrs:{id:"_8-1-7-basicè®¤è¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-7-basicè®¤è¯"}},[t._v("#")]),t._v(" 8.1.7 Basicè®¤è¯")]),t._v(" "),a("p",[t._v("Basicè®¤è¯æ˜¯å½“å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯è¿›è¡Œè¯·æ±‚æ—¶ï¼Œå…è®¸é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å®ç°çš„ä¸€ç§èº«ä»½è®¤è¯æ–¹å¼ï¼Œè¿™é‡Œç®€è¦ä»‹ç»å®ƒçš„åŸç†å’Œå®ƒåœ¨æœåŠ¡ç«¯é€šè¿‡Nodeå¤„ç†çš„æµç¨‹ã€‚"),a("br"),t._v("\nå¦‚æœä¸€ä¸ªé¡µé¢éœ€è¦Basicè®¤è¯ï¼Œå®ƒä¼šæ£€æŸ¥è¯·æ±‚æŠ¥æ–‡ä¸­çš„Authrizationå­—æ®µçš„å†…å®¹ï¼Œè¯¥å­—æ®µçš„å€¼ç”±è®¤è¯æ–¹å¼å’ŒåŠ å¯†å€¼æ„æˆ..."),a("br"),t._v("\nä¸è¿‡Basicè®¤è¯æœ‰å¾ˆå¤šç¼ºç‚¹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_8-2-æ•°æ®ä¸Šä¼ "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-æ•°æ®ä¸Šä¼ "}},[t._v("#")]),t._v(" 8.2 æ•°æ®ä¸Šä¼ ")]),t._v(" "),a("p",[t._v("ä¸Šè¿°çš„å†…å®¹åŸºæœ¬éƒ½é›†ä¸­åœ¨HTTPè¯·æ±‚æŠ¥æ–‡å¤´ä¸­ï¼Œé€‚ç”¨äºGETè¯·æ±‚å’Œå¤§å¤šæ•°å…¶ä»–è¯·æ±‚ã€‚å¤´éƒ¨æŠ¥æ–‡ä¸­çš„å†…å®¹å·²ç»èƒ½å¤Ÿè®©æœåŠ¡å™¨ç«¯è¿›è¡Œå¤§å¤šæ•°ä¸šåŠ¡é€»è¾‘æ“ä½œäº†ï¼Œä½†æ˜¯å•çº¯çš„å¤´éƒ¨æŠ¥æ–‡æ— æ³•æºå¸¦å¤§é‡çš„æ•°æ®ï¼Œåœ¨ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ¥æ”¶ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚è¡¨å•æäº¤ï¼Œæ–‡ä»¶æäº¤ï¼ŒJSONä¸Šä¼ ï¼ŒXMLä¸Šä¼ ç­‰ã€‚")]),t._v(" "),a("p",[t._v("Nodeçš„httpæ¨¡å—æ”¯é˜ŸHTTPæŠ¥æ–‡çš„å¤´éƒ¨è¿›è¡Œäº†è§£æï¼Œç„¶åå‡ºå‘requestäº‹ä»¶ï¼Œå¦‚æœè¯·æ±‚ä¸­æµ·æ²¹å†…å®¹éƒ¨åˆ†(å¦‚POSTè¯·æ±‚ï¼Œå®ƒå…·æœ‰è¯·æ±‚å’Œå†…å®¹)ï¼Œå†…å®¹éƒ¨åˆ†éœ€è¦ç”¨æˆ·è‡ªè¡Œæ¥æ”¶å’Œè§£æï¼Œé€šè¿‡æŠ¥å¤´çš„"),a("code",[t._v("Transfer-Encoding")]),t._v("æˆ–"),a("code",[t._v("Content-Length")]),t._v("å³å¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦å¸¦æœ‰å†…å®¹ã€‚å¦‚ä¸‹:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("hasBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("transfer-encoding")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-length'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨HTTP_Parserè§£ææŠ¥å¤´ç»“æŸåï¼ŒæŠ¥æ–‡å†…å®¹éƒ¨åˆ†ä¼šé€šè¿‡dataäº‹ä»¶è§¦å‘ï¼Œæˆ‘ä»¬åªéœ€ä»¥æµçš„æ–¹å¼å¤„ç†å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" buffers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      buffers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rawBody "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨æ¥æ”¶åˆ°çš„Bufferåˆ—è¡¨è½¬åŒ–ä¸ºä¸€ä¸ªBufferå¯¹è±¡åï¼Œå†è½¬æ¢ä¸ºæ²¡æœ‰ä¹±ç çš„å­—ç¬¦ä¸²ï¼Œæš‚æ—¶æŒ‚ç½®åœ¨req.rawBodyå¤„ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_8-2-1-è¡¨å•æ•°æ®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-1-è¡¨å•æ•°æ®"}},[t._v("#")]),t._v(" 8.2.1 è¡¨å•æ•°æ®")]),t._v(" "),a("p",[t._v("é»˜è®¤çš„è¡¨å•æäº¤ï¼Œè¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µå€¼ä¸ºapplication/x-www-form-urlencoded")]),t._v(" "),a("h4",{attrs:{id:"_8-2-2-å…¶ä»–æ ¼å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-2-å…¶ä»–æ ¼å¼"}},[t._v("#")]),t._v(" 8.2.2 å…¶ä»–æ ¼å¼")]),t._v(" "),a("p",[t._v("é™¤äº†è¡¨å•æ•°æ®å¤–ï¼Œå¸¸è§çš„æäº¤è¿˜æœ‰JSONå’ŒXMLç­‰ï¼Œåˆ¤æ–­å’Œè§£æä»–ä»¬çš„åŸç†éƒ½æ¯”è¾ƒç›¸ä¼¼ï¼Œä¾æ®Content-Typeï¼ŒJSONç±»å‹çš„å€¼ä¸ºapplication/jsonï¼ŒXMLçš„å€¼ä¸ºapplication/xmlã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Content-Typeä¸­å¯èƒ½è¿˜é™„å¸¦å¦‚ä¸‹çš„ç¼–ç ä¿¡æ¯"),a("code",[t._v("Content-Type: application/json; charset=utf-8")]),t._v("ï¼Œæ‰€ä»¥åœ¨åšåˆ¤æ–­æ—¶ï¼Œéœ€è¦æ³¨æ„åŒºåˆ†ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mine")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-2-3-é™„è¿‘ä¸Šä¼ "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-3-é™„è¿‘ä¸Šä¼ "}},[t._v("#")]),t._v(" 8.2.3 é™„è¿‘ä¸Šä¼ ")]),t._v(" "),a("p",[t._v("åœ¨HTMLä»£ç ä¸­ï¼Œç‰¹æ®Šè¡¨å•ä¸æ™®é€šè¡¨å•çš„å·®å¼‚åœ¨äºè¯¥è¡¨å•ä¸­å¯ä»¥å«æœ‰fileç±»å‹çš„æ§ä»¶ï¼Œä»¥åŠéœ€è¦æŒ‡å®šè¡¨å•å±æ€§enctypeä¸ºmultipart/form-dataï¼Œè¯·æ±‚æŠ¥æ–‡å¤´ä¸æ™®é€šè¡¨å•ä¹Ÿæœ‰ä¸åŒï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" multipart"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("form"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" boundary"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AaB03x   \nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18231")]),t._v("\n")])])]),a("p",[a("code",[t._v("boundary=AaB03x")]),t._v("æŒ‡å®šçš„æ˜¯æ¯éƒ¨åˆ†å†…å®¹çš„åˆ†è§£ç¬¦ï¼Œ"),a("code",[t._v("AaB03x")]),t._v("æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼ŒæŠ¥æ–‡ä½“çš„å†…å®¹å°†é€šè¿‡åœ¨å®ƒå‰é¢æ·»åŠ --è¿›è¡Œåˆ†å‰²ï¼ŒæŠ¥æ–‡ç»“æŸååœ¨å®ƒå‰åéƒ½åŠ ä¸Š--è¡¨ç¤ºç»“æŸã€‚å¦å¤–ï¼Œ"),a("code",[t._v("Content-Type")]),t._v("çš„å€¼å¿…é¡»ç¡®ä¿æ˜¯æŠ¥æ–‡ä½“çš„é•¿åº¦ã€‚")]),t._v(" "),a("p",[t._v("ç”±äºæ˜¯æ–‡ä»¶ä¸Šä¼ ï¼Œé‚£ä¹ˆåƒæ™®é€šè¡¨å•ï¼ŒJSONæˆ–XMLé‚£æ ·å…ˆæ¥å—å†…å®¹åœ¨è§£æçš„æ–¹å¼å°†å˜å¾—ä¸å¯æ¥å—ï¼Œæ¥æ”¶å¤§å°æœªçŸ¥çš„æ•°æ®é‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ååˆ†è°¨æ…ã€‚å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("done")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseJSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/xml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseXML")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'multipart/form-data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseMultipart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hanle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œè¦ç”¨åˆ°æ¨¡å—formiableã€‚å®ƒåŸºäºæµå¼å¤„ç†è§£ææŠ¥æ–‡ï¼Œå°†æ¥æ”¶åˆ°çš„æ–‡ä»¶å†™å…¥åˆ°ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶è¿”å›å¯¹åº”çš„è·¯å¾„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fromiable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'formiable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hasBody"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'multipart/from-data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" form "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("formiable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IncomingForm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      form"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fields\n        req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" files\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-2-4-æ•°æ®ä¸Šä¼ ä¸å®‰å…¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-4-æ•°æ®ä¸Šä¼ ä¸å®‰å…¨"}},[t._v("#")]),t._v(" 8.2.4 æ•°æ®ä¸Šä¼ ä¸å®‰å…¨")]),t._v(" "),a("h5",{attrs:{id:"å†…å­˜é™åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜é™åˆ¶"}},[t._v("#")]),t._v(" å†…å­˜é™åˆ¶")]),t._v(" "),a("p",[t._v("æ”»å‡»è€…é€šè¿‡å®¢æˆ·ç«¯èƒ½å¤Ÿååˆ†å®¹æ˜“çš„æ¨¡æ‹Ÿä¼ªé€ å¤§é‡æ•°æ®ï¼Œå¦‚æœæ”»å‡»è€…æ¯æ¬¡éƒ½æäº¤1MBçš„å†…å®¹ï¼Œé‚£ä¹ˆåªè¦å¹¶å‘è¯·æ±‚æ•°é‡ä¸€å¤§ï¼Œå†…å­˜å¾ˆå¿«å°±ä¼šè¢«åƒå…‰ï¼Œè§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é™åˆ¶ä¸Šä¼ å†…å®¹çš„å¤§å°ï¼Œä¸€æ—¦è¶…è¿‡é™åˆ¶ï¼Œåœæ­¢æ¥æ”¶æ•°æ®ï¼Œå¹¶ç›¸åº”400çŠ¶æ€ç ")]),t._v(" "),a("li",[t._v("é€šè¿‡æµå¼è§£æï¼Œå°†æ•°æ®å¯¼å‘ç£ç›˜ä¸­ï¼ŒNodeå€¼ä¿ç•™æ–‡ä»¶è·¯å¾„ç­‰å°æ•°æ®")])]),t._v(" "),a("h5",{attrs:{id:"csrf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[t._v("#")]),t._v(" CSRF")]),t._v(" "),a("p",[t._v("CSRFå…¨ç§°æ˜¯Cross-Site Request Forgery, è·¨ç«™è¯·æ±‚ä¼ªé€ \ndomian-aï¼šæ­£å¸¸æäº¤ä¼šæºå¸¦cookieåŠfromå‚æ•°å€¼ï¼Œ"),a("br"),t._v("\ndomian-bï¼šç½‘é¡µä¸­åŒ…å«å‘aæœåŠ¡ç«¯å‘é€è¯·æ±‚(ç›¸å…³ä¸åˆ©ä»£ç )çš„æ“ä½œ")]),t._v(" "),a("p",[t._v("XSSä¸»è¦åˆ©ç”¨ç”¨æˆ·è¾“å…¥çš„ä¸ä¸¥è°¨ï¼Œç„¶åæ‰§è¡Œjsè¯­å¥ï¼ŒCSRFé€šè¿‡ä¼ªé€ å—ä¿¡ä»»ç”¨æˆ·å‘é€è¯·æ±‚ï¼ŒSCRFå¯é€šè¿‡XSSå®ç°")]),t._v(" "),a("p",[t._v("è§£å†³æ–¹æ¡ˆï¼Œåœ¨Sessionä¸­èµ‹äºˆä¸€ä¸ªéšæœºå€¼ï¼Œå†åšé¡µé¢æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œå°†è¿™ä¸ª_scrfå€¼å‘ŠçŸ¥å‰ç«¯ï¼Œç”±äºè¯¥å€¼æ˜¯ä¸€ä¸ªéšæœºå€¼ï¼Œæ”»å‡»è€…æ„é€ å‡ºç›¸åŒçš„éšæœºå€¼éš¾åº¦ç›¸å½“å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨æ¥æ”¶ç«¯åšä¸€æ¬¡æ ¡éªŒå°±èƒ½è½»æ˜“è¯†åˆ«å‡ºè¯¥è¯·æ±‚æ˜¯å¦æ˜¯ä¼ªé€ çš„")]),t._v(" "),a("h3",{attrs:{id:"_8-3-è·¯ç”±è§£æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-è·¯ç”±è§£æ"}},[t._v("#")]),t._v(" 8.3 è·¯ç”±è§£æ")]),t._v(" "),a("p",[t._v("æœ¬èŠ‚ä¼šä»‹ç»æ–‡ä»¶è·¯å¾„ï¼ŒMVCï¼ŒRESTfulç­‰è·¯ç”±æ–¹å¼")]),t._v(" "),a("h4",{attrs:{id:"_8-3-1-æ–‡ä»¶è·¯å¾„å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-1-æ–‡ä»¶è·¯å¾„å‹"}},[t._v("#")]),t._v(" 8.3.1 æ–‡ä»¶è·¯å¾„å‹")]),t._v(" "),a("ol",[a("li",[t._v("é™æ€æ–‡ä»¶\nè¿™ç§æ–¹å¼çš„è·¯ç”±åœ¨è·¯å¾„è§£æçš„éƒ¨åˆ†æœ‰è¿‡ç®€å•æè¿°ï¼Œå…¶è®©äººèˆ’æœçš„åœ°æ–¹åœ¨äºURLçš„è·¯å¾„ä¸ç½‘ç«™ç›®å½•çš„è·¯å¾„ä¸€è‡´ï¼Œæ— éœ€è½¬æ¢ï¼Œéå¸¸ç›´è§‚ï¼Œè¿™ç§è·¯ç”±çš„å¤„ç†æ–¹å¼ä¹Ÿååˆ†ç®€å•ï¼Œå°†è¯·æ±‚è·¯å¾„å¯¹åº”çš„æ–‡ä»¶å‘é€ç»™å®¢æˆ·ç«¯å³å¯")]),t._v(" "),a("li",[t._v("åŠ¨æ€æ–‡ä»¶\nåœ¨MVCæ¨¡å¼æµè¡Œä¹‹å‰ï¼Œæ ¹æ®æ–‡ä»¶è·¯å¾„æ‰§è¡ŒåŠ¨æ€è„šæœ¬ä¹Ÿæ˜¯åŸºæœ¬çš„è·¯ç”±æ–¹å¼ï¼Œå®ƒçš„å¤„ç†åŸç†æ˜¯WebæœåŠ¡é½å…¨æ ¹æ®URLè·¯å¾„æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œå¦‚/index.aspæˆ–/index.phpã€‚WebæœåŠ¡å™¨æ ¹ç»æ–‡ä»¶ååç¼€å»å¯»æ‰¾è„šæœ¬çš„è§£æå™¨ã€‚å¹¶ä¼ å…¥HTTPè¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚ä»¥ä¸‹æ˜¯Apacheç§é…ç½®PHPæ”¯æŒçš„æ–¹å¼ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AddType application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("httpd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("php "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php\n")])])]),a("p",[t._v("è§£æå™¨æ‰§è¡Œè„šæœ¬ï¼Œå¹¶è¾“å‡ºå“åº”æŠ¥æ–‡ï¼Œè¾¾åˆ°å®ŒæˆæœåŠ¡çš„ç›®çš„ã€‚ç°ä»Šå¤§å¤šæ•°çš„æœåŠ¡å™¨éƒ½å¾ˆåªèƒ½çš„æ ¹æ®åç¼€åŒäº‹æœåŠ¡åŠ¨æ€å’Œé™æ€æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼åœ¨Nodeä¸­ä¸å¤ªå¸¸è§ï¼Œä¸»è¦åŸå› æ˜¯æ–‡ä»¶çš„åç¼€éƒ½æ˜¯.jsï¼Œåˆ†ä¸æ¸…æ˜¯åç«¯è„šæœ¬ï¼Œè¿˜æ˜¯å‰ç«¯è„šæœ¬ï¼Œè¿™å¯ä¸æ˜¯ä»€ä¹ˆå¥½çš„è®¾è®¡ï¼Œè€Œä¸”Nodeä¸­çš„WebæœåŠ¡å™¨ä¸åº”ç”¨ä¸šåŠ¡è„šæœ¬æ˜¯ä¸€ä½“çš„ï¼Œæ— éœ€æŒ‰è¿™ç§æ–¹å¼å®ç°")]),t._v(" "),a("h4",{attrs:{id:"_8-3-2-mvc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-2-mvc"}},[t._v("#")]),t._v(" 8.3.2 MVC")]),t._v(" "),a("p",[t._v("åœ¨MVCæµè¡Œä¹‹å‰ï¼Œä¸»æµçš„å¤„ç†æ–¹å¼éƒ½æ˜¯é€šè¿‡æ–‡ä»¶è·¯å¾„è¿›è¡Œå¤„ç†çš„ï¼Œç”šè‡³ä»¥ä¸ºæ˜¯å¸¸æ€ï¼Œç›´åˆ°æœ‰ä¸€å¤©å¼€å‘è€…å‘ç°ç”¨æˆ·è¯·æ±‚çš„URLè·¯å¾„åŸæ¥æ ¹å…·ä½“è„šæœ¬æ‰€åœ¨çš„è·¯å¾„æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚")]),t._v(" "),a("p",[t._v("MVCæ¨¡å‹ä¸»è¦æ€æƒ³æ˜¯å°†ä¸šåŠ¡é€»è¾‘æŒ‰èŒè´£åˆ†ç¦»ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ§åˆ¶å™¨Controllerï¼Œä¸€ç»„è¡Œä¸ºçš„é›†åˆ")]),t._v(" "),a("li",[t._v("æ¨¡å‹Modelï¼Œæ•°æ®ç›¸å…³çš„æ“ä½œå’Œå°è£…ã€‚")]),t._v(" "),a("li",[t._v("è§†å›¾Viewï¼Œè§†å›¾çš„æ¸²æŸ“")])]),t._v(" "),a("p",[t._v("å·¥ä½œæ¨¡å¼å¦‚ä¸‹è¯´æ˜")]),t._v(" "),a("ul",[a("li",[t._v("è·¯ç”±è§£æï¼Œæ ¹æ®URLå¯»æ‰¾å¯¹åº”çš„æ§åˆ¶å™¨å’Œè¡Œä¸º")]),t._v(" "),a("li",[t._v("è¡Œä¸ºè°ƒç”¨ç›¸å…³çš„æ¨¡å‹ï¼Œè¿›è¡Œæ•°æ®æ“ä½œ")]),t._v(" "),a("li",[t._v("æ•°æ®æ“ä½œç»“æŸåï¼Œè°ƒç”¨è§†å›¾å’Œç›¸å…³æ•°æ®è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¾“å‡ºåˆ°å®¢æˆ·ç«¯")])]),t._v(" "),a("h4",{attrs:{id:"_8-3-3-restful"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-3-restful"}},[t._v("#")]),t._v(" 8.3.3 RESTful")]),t._v(" "),a("p",[t._v("MVCæ¨¡å¼å¤§è¡Œå…¶é“äº†å¾ˆå¤šå¹´ï¼ŒçŸ¥é“RESTfulçš„æµè¡Œï¼Œå¤§å®¶æ‰æ„è¯†åˆ°URLä¹Ÿå¯ä»¥è®¾è®¡çš„å¾ˆè§„èŒƒï¼Œè¯·æ±‚æ–¹æ³•ä¹Ÿèƒ½ä½œä¸ºé€»è¾‘åˆ†å‘çš„å•å…ƒã€‚"),a("br"),t._v("\nRESTfulçš„å…¨ç§°æ˜¯Representational State Transferï¼Œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‚ç¬¦åˆRESTè§„èŒƒçš„è®¾è®¡ï¼Œæˆ‘ä»¬æˆä¸ºRESTfulè®¾è®¡ï¼Œä»–çš„è®¾è®¡å“²å­¦ä¸»è¦å°†æœåŠ¡å™¨ç«¯æä¾›çš„å†…å®¹å®ä½“çœ‹åšä¸€ä¸ªèµ„æºï¼Œå¹¶è¡¨ç°åœ¨URLä¸Šã€‚æ¯”å¦‚ä¸€ä¸ªç”¨æˆ·çš„åœ°å€å¦‚ä¸‹æ‰€ç¤ºï¼š "),a("code",[t._v("/user/jacksontian")])]),t._v(" "),a("p",[t._v("è¿™ä¸ªåœ°å€ä»£è¡¨äº†ä¸€ä¸ªèµ„æºï¼Œå¯¹è¿™ä¸ªèµ„æºçš„æ“ä½œï¼Œä¸»è¦ä½“ç°åœ¨HTTPè¯·æ±‚æ–¹æ³•ä¸Šï¼Œä¸æ˜¯ä½“ç°åœ¨URLä¸Šï¼Œè¿‡å»æˆ‘ä»¬å¯¹ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥æˆ–è®¸æ˜¯è¿™æ ·è®¾è®¡URLçš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jacksontian\n")])])]),a("p",[t._v("æ“ä½œè¡Œä¸ºä¸»è¦ä½“ç°åœ¨è¡Œä¸ºä¸Šï¼Œä¸»è¦ä½¿ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯POSTå’ŒGETï¼Œåœ¨RESTfulè®¾è®¡ä¸­ï¼Œå®ƒæ˜¯å¦‚ä¸‹è¿™æ ·çš„")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian\n")])])]),a("p",[t._v("å®ƒå°†DELETEå’ŒPUTè¯·æ±‚æ–¹æ³•å¼•å…¥è®¾è®¡ä¸­ï¼Œå‚ä¸èµ„æºçš„æ“ä½œå’Œæ›´æ”¹èµ„æºçš„çŠ¶æ€ã€‚"),a("br"),t._v("\nå¯¹äºè¿™ä¸ªèµ„æºçš„å…·ä½“è¡¨ç°å½¢æ€ï¼Œä¹Ÿä¸å†å¦‚è¿‡å»ä¸€æ ·è¡¨ç°åœ¨URLçš„æ–‡ä»¶åç¼€ä¸Šï¼Œè¿‡å»è®¾è®¡èµ„æºçš„æ ¼å¼ä¸åç¼€æœ‰å¾ˆå¤§çš„å…³è”ï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jacksontian"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xml\n")])])]),a("p",[t._v("åœ¨RESTfulè®¾è®¡ä¸­ï¼Œèµ„æºçš„å…·ä½“æ ¼å¼ç”±è¯·æ±‚æŠ¥å¤´ä¸­çš„Acceptå­—æ®µå’ŒæœåŠ¡ç«¯çš„æ”¯æŒæƒ…å†µæ¥å†³å®šï¼Œå¦‚æœå®¢æˆ·ç«¯åŒæ—¶æ¥å—JSONå’ŒXMLæ ¼å¼çš„å“åº”ï¼Œé‚£ä¹ˆå®ƒçš„Acceptå­—æ®µå€¼æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š"),a("code",[t._v("Accept: application/json,application/xml")]),t._v("ã€‚"),a("br"),t._v("\né è°±çš„æœåŠ¡å™¨ç«¯åº”è¯¥è¦é¡¾åŠè¿™ä¸ªå­—æ®µï¼Œç„¶åæ ¹æ®è‡ªå·±èƒ½å“åº”çš„æ ¼å¼åšå‡ºç›¸åº”ï¼Œåœ¨å“åº”æŠ¥æ–‡ä¸­ï¼Œé€šè¿‡Content-Typeå­—æ®µå‘ŠçŸ¥å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œå¦‚"),a("code",[t._v("Content-Type: application/json")]),a("br"),t._v("\nå…·ä½“æ ¼å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå…·ä½“çš„è¡¨ç°ï¼Œæ‰€ä»¥RESTçš„è®¾è®¡å°±æ˜¯ï¼Œé€šè¿‡URLè®¾è®¡èµ„æºï¼Œè¯·æ±‚æ–¹æ³•å®šä¹‰èµ„æºçš„æ“ä½œï¼Œé€šè¿‡Acceptå†³å®šèµ„æºçš„è¡¨ç°å½¢å¼ã€‚"),a("br"),t._v("\nRESTfulä¸MVCå¹¶ä¸å†²çªï¼Œè€Œä¸”æ˜¯æ›´å¥½çš„æ”¹è¿›ï¼Œç›¸æ¯”MVCï¼ŒRESTfulçŸ¥è¯†å°†HTTPè¯·æ±‚æ–¹æ³•ä¹ŸåŠ å…¥äº†è·¯ç”±çš„è¿‡ç¨‹ï¼Œä»¥åŠåœ¨URLè·¯å¾„ä¸Šä½“ç°çš„æ›´èµ„æºåŒ–")]),t._v(" "),a("h3",{attrs:{id:"_8-4-ä¸­é—´ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-ä¸­é—´ä»¶"}},[t._v("#")]),t._v(" 8.4 ä¸­é—´ä»¶")]),t._v(" "),a("p",[t._v("// Todo"),a("br"),t._v("\n// çœ‹äº†ä¸€éä¸æ˜¯å¾ˆæ‡‚~~")]),t._v(" "),a("h3",{attrs:{id:"_8-5-é¡µé¢æ¸²æŸ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-é¡µé¢æ¸²æŸ“"}},[t._v("#")]),t._v(" 8.5 é¡µé¢æ¸²æŸ“")]),t._v(" "),a("h4",{attrs:{id:"_8-5-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-1"}},[t._v("#")]),t._v(" 8.5.1")]),t._v(" "),a("p",[t._v("æœåŠ¡å™¨ç«¯çš„å“åº”æŠ¥æ–‡ï¼Œæœ€ç»ˆéƒ½è¦è¢«ç»ˆç«¯å¤„ç†ï¼Œè¿™ä¸ªç»ˆç«¯å¯èƒ½æ˜¯å‘½ä»¤è¡Œç»ˆç«¯ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»£ç ç»ˆç«¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æµè§ˆå™¨ã€‚æœåŠ¡å™¨ç«¯çš„å“åº”ä»ä¸€å®šç¨‹åº¦ä¸Šå†³å®šæˆ–æŒ‡ç¤ºäº†å®¢æˆ·ç«¯è¯¥å¦‚ä½•å¤„ç†å“åº”çš„å†…å®¹ã€‚å†…å®¹å“åº”çš„è¿‡ç¨‹ä¸­ï¼Œå“åº”æŠ¥å¤´ä¸­çš„Content-*å­—æ®µååˆ†é‡è¦ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" gzip\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21170")]),t._v("\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" charset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n")])])]),a("p",[t._v("ä¸Šé¢æŠ¥æ–‡æœåŠ¡å™¨ç«¯å‘Šè¯‰å®¢æˆ·ç«¯å†…å®¹æ˜¯ä»¥gzipç¼–ç çš„ï¼Œå…¶å†…å®¹é•¿åº¦ä¸º21170ä¸ªå­—èŠ‚ï¼Œå†…å®¹ç±»å‹ä¸ºjavascriptï¼Œå­—ç¬¦é›†ä¸ºUTF-8ã€‚"),a("br"),t._v("\nå®¢æˆ·ç«¯åœ¨æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡åï¼Œæ­£ç¡®çš„å¤„ç†è¿‡ç¨‹æ˜¯é€šè¿‡gzipæ¥è§£ç æŠ¥æ–‡ä½“ä¸­çš„å†…å®¹ï¼Œç”¨é•¿åº¦æ ¡éªŒæŠ¥é—®é¢˜å†…å®¹æ˜¯å¦æ­£ç¡®ï¼Œç„¶åå†ä»¥å­—ç¬¦é›†UTF-8å°†è§£ç åçš„è„šæœ¬æ’å…¥åˆ°æ–‡æ¡£èŠ‚ç‚¹ä¸­")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<html><body>hello world</body></html>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<html><body>hello world</body></html>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰è€…æ˜¾ç¤ºæ•´æ®µæ–‡æœ¬ï¼Œåè€…åªæ˜¾ç¤ºhello world")]),t._v("\n")])])]),a("p",[t._v("æµè§ˆå™¨é€šè¿‡ä¸åŒçš„Content-Typeçš„å€¼æ¥å†³å®šé‡‡ç”¨ä¸åŒçš„æ¸²æŸ“æ–¹å¼ï¼Œè¿™ä¸ªå€¼æˆ‘ä»¬ç®€ç§°ä¸ºMIMEï¼Œå…¨ç§°ä¸ºMultipurpose Internet Mail Extensionsï¼Œä»åå­—å¯ä»¥çœ‹å‡ºï¼Œå®ƒæœ€æ—©åº”ç”¨äºç”µå­é‚®ä»¶ï¼Œåæ¥ä¹Ÿåº”ç”¨åˆ°æµè§ˆå™¨ä¸­ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæ— è®ºå“åº”çš„æ˜¯ä»€ä¹ˆæ ·çš„MIMEå€¼ï¼Œéœ€æ±‚ä¸­å¹¶ä¸è¦è¦æ±‚å®¢æˆ·ç«¯å»æ‰“å¼€å®ƒï¼Œåªéœ€å¼¹å‡ºå¹¶ä¸‹è½½å®ƒå³å¯ã€‚ä¸ºäº†æ»¡è¶³è¿™ç§éœ€æ±‚ï¼ŒContent-Dispositionå­—æ®µç™»åœºï¼Œæµè§ˆå™¨ä¼šæ ¹æ®è¯¥å­—æ®µçš„å€¼åˆ¤æ–­æ—¶åº”è¯¥è®²æŠ¥æ–‡æ•°æ®å½“åšå³æ—¶æµè§ˆå™¨çš„å†…å®¹ï¼Œè¿˜æ˜¯å¯ä¸‹è½½çš„é™„ä»¶ã€‚å½“å†…å®¹åªéœ€å³æ—¶æŸ¥çœ‹æ—¶ï¼Œå®ƒçš„å€¼æ˜¯inlineï¼Œå½“æ•°æ®å¯ä»¥å­˜ä¸ºé™„ä»¶æ—¶ï¼Œå®ƒçš„å€¼ä¸ºattachmentã€‚å¦å¤–Content-Dispositionå­—æ®µè¿˜èƒ½é€šè¿‡å‚æ•°æŒ‡å®šä¿å­˜æ—¶åº”è¯¥ä½¿ç”¨çš„æ–‡ä»¶åã€‚å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Disposition"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" attachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'filename.txt'")]),t._v("\n")])])]),a("p",[t._v("å¦‚æœæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªå“åº”é™„ä»¶ä¸‹è½½çš„API(res.sendfile),æˆ‘ä»¬çš„æ–¹æ³•å¤§è‡´å¦‚ä¸‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sendfile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("filepath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//statæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" stream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å†…å®¹")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®é•¿åº¦")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®ä¸ºé™„ä»¶")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Disposition'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'attachment; filename=\"'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¦‚ä¸‹ä¸ºå“åº”json")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("json")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-5-2-è§†å›¾æ¸²æŸ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-2-è§†å›¾æ¸²æŸ“"}},[t._v("#")]),t._v(" 8.5.2 è§†å›¾æ¸²æŸ“")]),t._v(" "),a("p",[t._v("æ™®é€šçš„HTMLå†…å®¹å“åº”ï¼Œç»Ÿç§°ä¸ºè§†å›¾æ¸²æŸ“ï¼Œé€šå¸¸æˆ‘ä»¬å°†æ¸²æŸ“æ–¹æ³•è®¾è®¡ä¸ºrender()ï¼Œå¦‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("render")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®é™…æ¸²æŸ“")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-5-3-æ¨¡æ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-3-æ¨¡æ¿"}},[t._v("#")]),t._v(" 8.5.3 æ¨¡æ¿")]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯åŠ¨æ€æ¸²æŸ“æŠ€æœ¯ï¼Œå¦‚ASP,PHP,JSPï¼Œä»–ä»¬å°†åŠ¨æ€è¯­è¨€é€šè¿‡ç‰¹æ®Šçš„æ ‡ç­¾(ASPå’ŒJSPä»¥<%%>ä½œä¸ºæ ‡å¿—ï¼ŒPHPåˆ™ä»¥<??>ä½œä¸ºæ ‡å¿—)ï¼Œé€šè¿‡HTMLå’Œæ¨¡æ¿æ ‡ç­¾æ··æ’ï¼Œå°†å¼€å‘è€…ä»è¾“å‡ºHTMLçš„å·¥ä½œä¸­è§£è„±å‡ºæ¥ï¼Œè¿™æ ·çš„æ–¹æ³•è™½ç„¶ä¸€å®šç¨‹åº¦ä¸Šå‡è½»äº†å¼€å‘ç»´æŠ¤çš„éš¾åº¦ï¼Œä½†æ˜¯é¡µé¢é‡Œè¿˜æ˜¯å……æ–¥ç€å¤§é‡çš„é€»è¾‘ä»£ç ã€‚è¿™å‚¬ç”Ÿäº†MVCåœ¨åŠ¨æ€ç½‘é¡µæŠ€æœ¯ä¸­çš„å‘å±•ï¼ŒMVCå°†é€»è¾‘ï¼Œæ˜¾ç¤ºï¼Œæ•°æ®åˆ†ç¦»å¼€çš„æ–¹å¼ï¼Œå¤§å¤§æé«˜äº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§")]),t._v(" "),a("h4",{attrs:{id:"_8-6-å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-å°ç»“"}},[t._v("#")]),t._v(" 8.6 å°ç»“")]),t._v(" "),a("p",[t._v("åœ¨webåº”ç”¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä»å¤„ç†è¯·æ±‚åˆ°å“åº”è¿‡ç¨‹çš„æ•´ä¸ªè¿‡ç¨‹éƒ½éœ€è¦è€ƒè™‘")]),t._v(" "),a("h3",{attrs:{id:"ç¬¬ä¹ç« -ç©è½¬è¿›ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¹ç« -ç©è½¬è¿›ç¨‹"}},[t._v("#")]),t._v(" ç¬¬ä¹ç«  ç©è½¬è¿›ç¨‹")]),t._v(" "),a("p",[t._v("å•çº¿ç¨‹çš„åŠ£åŠ¿ï¼šå¦‚ä½•å……åˆ†åˆ©ç”¨å¤šæ ¸CPUæœåŠ¡å™¨ï¼Œå¦‚ä½•ä¿è¯è¿›ç¨‹çš„å¥å£®æ€§å’Œç¨³å®šæ€§ï¼Ÿ(ä¸€æ—¦å•çº¿ç¨‹ä¸ŠæŠ›å‡ºçš„å¼‚å¸¸æ²¡æœ‰è¢«æ•è·ï¼Œå°†ä¼šå¼•èµ·æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒ)")]),t._v(" "),a("h4",{attrs:{id:"_9-1-æœåŠ¡å™¨çš„å˜è¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-æœåŠ¡å™¨çš„å˜è¿"}},[t._v("#")]),t._v(" 9.1 æœåŠ¡å™¨çš„å˜è¿")]),t._v(" "),a("ol",[a("li",[t._v("æ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªè¿›ç¨‹æ¥æœåŠ¡")]),t._v(" "),a("li",[t._v("æ¯ä¸ªçº¿ç¨‹æœåŠ¡ä¸€ä¸ªè¯·æ±‚ï¼Œå³å¤šçº¿ç¨‹/å¤šè¿›ç¨‹ï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸åœ¨åˆ‡æ¢çº¿ç¨‹çš„åŒæ—¶ä¹Ÿè¦åˆ‡æ¢çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œå½“çº¿ç¨‹æ•°é‡è¾ƒå¤šæ—¶ï¼Œæ—¶é—´æ¶ˆè€—ä¼šå¾ˆå¤§")]),t._v(" "),a("li",[t._v("ä¸ºäº†è§£å†³é«˜å¹¶å‘é—®é¢˜ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨çš„æœåŠ¡æ¨¡å‹å‡ºç°äº†ï¼ŒåƒNodeä¸Nginxéƒ½æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„æ–¹å¼å®ç°çš„")])]),t._v(" "),a("h4",{attrs:{id:"_9-2-å¤šè¿›ç¨‹æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-å¤šè¿›ç¨‹æ¶æ„"}},[t._v("#")]),t._v(" 9.2 å¤šè¿›ç¨‹æ¶æ„")]),t._v(" "),a("p",[t._v("child_processæ¨¡å—"),a("br"),t._v("\nMaster-Workeræ¨¡å¼ï¼Œåˆç§°ä¸»ä»æ¨¡å¼ã€‚è¿›ç¨‹åˆ†ä¸¤ç§ï¼Œä¸»è¿›ç¨‹å’Œå·¥ä½œè¿›ç¨‹ï¼Œè¿™æ˜¯å…¸å‹çš„åˆ†å¸ƒå¼æ¶æ„ä¸­ç”¨äºå¹¶è¡Œå¤„ç†ä¸šåŠ¡çš„æ¨¡å¼ï¼Œå…·æœ‰è¾ƒå¥½çš„å¯ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§\n// Todo åé¢çš„æ²¡çœ‹ QAQ")]),t._v(" "),a("h4",{attrs:{id:"_9-3-é›†ç¾¤ç¨³å®šä¹‹è·¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-é›†ç¾¤ç¨³å®šä¹‹è·¯"}},[t._v("#")]),t._v(" 9.3 é›†ç¾¤ç¨³å®šä¹‹è·¯")]),t._v(" "),a("p",[t._v("// å¾…çœ‹")]),t._v(" "),a("h4",{attrs:{id:"_9-4-clusteræ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-clusteræ¨¡å—"}},[t._v("#")]),t._v(" 9.4 Clusteræ¨¡å—")]),t._v(" "),a("p",[t._v("// å¾…çœ‹")]),t._v(" "),a("h3",{attrs:{id:"ç¬¬åç« -æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬åç« -æµ‹è¯•"}},[t._v("#")]),t._v(" ç¬¬åç«  æµ‹è¯•")]),t._v(" "),a("p",[t._v("æµ‹è¯•åŒ…æ‹¬å•å…ƒæµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œå®‰å…¨æµ‹è¯•ï¼ŒåŠŸèƒ½æµ‹è¯•ç­‰å‡ ä¸ªæ–¹é¢ï¼Œæœ¬ç« å°†ä»Nodeäº‹ä»¶çš„è§’åº¦æ¥ä»‹ç»å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•")]),t._v(" "),a("h4",{attrs:{id:"_10-1-å•å…ƒæµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-å•å…ƒæµ‹è¯•"}},[t._v("#")]),t._v(" 10.1 å•å…ƒæµ‹è¯•")]),t._v(" "),a("p",[t._v("ç¼–å†™å¯æµ‹è¯•ä»£ç æœ‰ä»¥ä¸‹å‡ ä¸ªåŸåˆ™å¯ä»¥éµå¾ª")]),t._v(" "),a("ul",[a("li",[t._v("å•ä¸€èŒè´£ï¼Œä¸€æ®µä»£ç ä¸­æ—¢åŒ…å«æ•°æ®åº“çš„è¿æ¥ï¼Œä¹ŸåŒ…å«æŸ¥è¯¢ï¼Œè¾ƒå¥½çš„æ–¹å¼æ˜¯å°†è¿™ä¸¤ç§èŒè´£è¿›è¡Œè§£è€¦åˆ†ç¦»ï¼Œå˜æˆä¸¤ä¸ªå•ä¸€èŒè´£çš„æ–¹æ³•")]),t._v(" "),a("li",[t._v("æ¥å£æŠ½è±¡ï¼Œé€šè¿‡å¯¹ç¨‹åºä»£ç è¿›è¡Œæ¥å£æŠ½è±¡åï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ¥å£è¿›è¡Œæµ‹è¯•è€Œå…·ä½“ä»£ç å®ç°çš„å˜åŒ–ä¸å½±å“ä¸ºæ¥å£ç¼–å†™çš„å•å…ƒæµ‹è¯•")]),t._v(" "),a("li",[t._v("å±‚æ¬¡åˆ†ç¦»ï¼Œå±‚æ¬¡åˆ†ç¦»å®é™…ä¸Šæ˜¯å•ä¸€èŒè´£çš„ä¸€ç§å®ç°ã€‚åœ¨MVCç»“æ„çš„åº”ç”¨ä¸­ï¼Œå°±æ˜¯å…¸å‹çš„å±‚æ¬¡åˆ†ç¦»æ¨¡å‹ï¼Œå¦‚æœä¸åˆ†ç¦»å„ä¸ªå±‚æ¬¡ï¼Œæ— æ³•æƒ³è±¡è¿™ä¸ªä»£ç è¯¥å¦‚ä½•åˆ‡å…¥æµ‹è¯•ï¼Œé€šè¿‡åˆ†å±‚ä¹‹åï¼Œå¯ä»¥é€å±‚æµ‹è¯•ï¼Œé€å±‚ä¿è¯ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_10-1-2-å•å…ƒæµ‹è¯•ä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-2-å•å…ƒæµ‹è¯•ä»‹ç»"}},[t._v("#")]),t._v(" 10.1.2 å•å…ƒæµ‹è¯•ä»‹ç»")]),t._v(" "),a("p",[t._v("å•å…ƒæµ‹è¯•ä¸»è¦åŒ…æ‹¬æ–­è¨€ï¼Œæµ‹è¯•æ¡†æ¶ï¼Œæµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•è¦†ç›–ç‡ï¼Œmockï¼ŒæŒç»­é›†æˆç­‰å‡ ä¸ªæ–¹é¢ï¼Œç”±äºNodeçš„ç‰¹æ®Šæ€§ï¼Œå®ƒè¿˜ä¼šåŠ å…¥å¼‚æ­¥ä»£ç æµ‹è¯•å’Œç§æœ‰æ–¹æ³•çš„æµ‹è¯•è¿™ä¸¤ä¸ªéƒ¨åˆ†")]),t._v(" "),a("ol",[a("li",[t._v("æ–­è¨€")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" readOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readof'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nreadOF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ä¸Šè¿°å¼€æºæ¨¡å—ï¼Œå¯¹è´¨é‡æ²¡æœ‰ä»»ä½•ä¿è¯ï¼Œä¸»è¦æºäºä»¥ä¸‹ä¸¤ç‚¹ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ²¡æœ‰å¯¹è¾“å‡ºç»“æœè¿›è¡Œä»»ä½•çš„æ£€æµ‹")]),t._v(" "),a("li",[t._v('è¾“å…¥æ¡ä»¶è¦†ç›–ç‡å¹¶ä¸å®Œå¤‡\nè¿™æ ·çš„ç¤ºä¾‹ä»£ç å±•ç°çš„æ˜¯"It works"è€Œä¸æ˜¯"Testing"ï¼Œç¤ºä¾‹ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œå¹¶ä¸ä»£è¡¨ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¦‚ä½•å¯¹è¾“å‡ºç»“æœè¿›è¡Œæ£€æµ‹ï¼Œä»¥ç¡®è®¤æ–¹æ³•è°ƒç”¨æ˜¯æ­£å¸¸çš„ï¼Œæ˜¯æœ€åŸºæœ¬çš„æµ‹è¯•ç‚¹ã€‚æ–­è¨€å°±æ˜¯å•å…ƒæµ‹è¯•ä¸­ç”¨æ¥ä¿è¯æœ€å°å•å…ƒæ˜¯å¦æ­£å¸¸çš„æ£€æµ‹æ–¹æ³•ã€‚')])]),t._v(" "),a("blockquote",[a("p",[t._v("æ–­è¨€ï¼šç»´åŸºæœ¬ç§‘å¤§çš„è§£é‡Šæ˜¯ï¼š åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæ–­è¨€(assertion)æ˜¯ä¸€ç§æ”¾åœ¨ç¨‹åºä¸­çš„ä¸€é˜¶é€»è¾‘(å¦‚ä¸€ä¸ªç»“æœä¸ºçœŸæˆ–æ˜¯å‡åœ°é€»è¾‘åˆ¤æ–­å¼)ï¼Œç›®çš„æ˜¯ä¸ºäº†æ ‡è¯†ç¨‹åºå¼€å‘è€…é¢„æœŸçš„ç»“æœ-â€”â€”å½“ç¨‹åºè¿è¡Œåˆ°æ–­è¨€çš„ä½ç½®æ—¶ï¼Œå¯¹åº”çš„æ–­è¨€åº”è¯¥ä¸ºçœŸï¼Œè‹¥æ–­è¨€ä¸ä¸ºçœŸï¼Œç¨‹åºä¼šä¸­æ­¢æ‰§è¡Œï¼Œå¹¶å‡ºç°é”™è¯¯ä¿¡æ¯ã€‚")])]),t._v(" "),a("p",[t._v("ç®€è¨€ä¹‹ï¼Œæ–­è¨€ç”¨äºæ£€æŸ¥ç¨‹åºåœ¨è¿è¡Œæ—¶æ˜¯å¦æ»¡è¶³æœŸæœ›")]),t._v(" "),a("p",[t._v("ä½¿ç”¨assertæ¨¡å—ï¼Œassert.equal()ä¸æ»¡è¶³æœŸæœ›ï¼Œå°†ä¼šæŠ›å‡ºAsssertionErrorå¼‚å¸¸ï¼Œæ•´ä¸ªç¨‹åºå°†ä¼šåœæ­¢æ‰§è¡Œï¼Œæ²¡æœ‰å¯¹è¾“å‡ºç»“æœè¿›è¡Œä»»ä½•æ–­è¨€æ£€æŸ¥çš„ä»£ç ï¼Œéƒ½ä¸æ˜¯æµ‹è¯•ä»£ç ï¼Œæ²¡æœ‰æµ‹è¯•ä»£ç çš„ä»£ç ï¼Œéƒ½æ˜¯ä¸å¯ä¿¡çš„ä»£ç ã€‚"),a("br"),t._v("\nåœ¨æ–­è¨€è§„èŒƒä¸­ï¼Œå®šä¹‰ä»¥ä¸‹å‡ ç§æ£€æµ‹æ–¹æ³•")]),t._v(" "),a("ul",[a("li",[t._v("ok(),åˆ¤æ–­ç»“æœæ˜¯å¦ä¸ºçœŸ")]),t._v(" "),a("li",[t._v("equal(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦ç›¸ç­‰")]),t._v(" "),a("li",[t._v("notequal(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦ä¸ç›¸ç­‰")]),t._v(" "),a("li",[t._v("deepEqual(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦æ·±åº¦ç›¸ç­‰(å¯¹è±¡æˆ–æ•°ç»„çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰)")]),t._v(" "),a("li",[t._v("noteepEqual(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦buæ·±åº¦ç›¸ç­‰")]),t._v(" "),a("li",[t._v("strictEqual(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰(ç›¸å½“äº===)")]),t._v(" "),a("li",[t._v("notStrictEqual(),åˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦ä¸ä¸¥æ ¼ç›¸ç­‰(ç›¸å½“äº!==)")]),t._v(" "),a("li",[t._v("throw(),åˆ¤æ–­ä»£ç å—æ˜¯å¦æŠ›å‡ºå¼‚å¸¸"),a("br"),t._v("\nNode seertæ¨¡å—è¿˜æ‰©å……äº†å¦‚ä¸‹ä¸¤ä¸ªæ–­è¨€æ–¹æ³•")])])])}),[],!1,null,null,null);s.default=e.exports}}]);